# 属性变量组管理 PRD

## 1. 功能描述

### 1.1 变量组列表管理
- **功能目标**: 提供变量组的统一管理界面，支持查看、搜索、筛选和批量操作
- **主要功能**: 
  - 变量组列表展示（名称、描述、类型、包含变量数、显示顺序、状态）
  - 变量组搜索和筛选（按名称、类型、状态）
  - 变量组状态管理（启用/禁用）
  - 变量组删除操作

### 1.2 变量组基本信息管理
- **功能目标**: 管理变量组的基本属性信息
- **主要功能**:
  - 变量组类型设置（静态属性组、业务变量组、动态变量组）
  - 变量组名称和描述编辑
  - 显示顺序设置

### 1.3 变量管理
- **功能目标**: 在变量组内管理具体的变量定义
- **主要功能**:
  - 变量添加、编辑、删除
  - 变量属性定义（名称、编码、数据类型、精度、单位、分类、采集频率、描述）
  - 变量分类管理（根据变量组类型动态调整）

### 1.4 行内编辑功能
- **功能目标**: 提供快速编辑变量组基本信息的便捷方式
- **主要功能**:
  - 直接在列表中编辑变量组属性
  - 实时保存和取消编辑操作

## 2. 交互说明

### 2.1 变量组列表操作
- **搜索功能**: 在搜索框中输入变量组名称，实时过滤列表
- **筛选功能**: 通过类型和状态下拉框进行多条件筛选
- **重置筛选**: 点击"重置"按钮清除所有筛选条件
- **新增变量组**: 点击"新增变量组"按钮打开抽屉式编辑界面

### 2.2 变量组编辑操作
- **变量管理**: 点击"变量管理"按钮打开抽屉，管理该变量组内的变量
- **行内编辑**: 点击"编辑"按钮使当前行变为可编辑状态
- **删除操作**: 点击"删除"按钮删除变量组（需确认）

### 2.3 抽屉式编辑界面
- **打开方式**: 从底部滑出，支持拖拽关闭
- **基本信息区域**: 显示变量组类型、名称、描述表单
- **变量管理区域**: 显示变量列表，支持行内添加、编辑、删除变量
- **保存操作**: 点击"保存变量"按钮保存所有更改

### 2.4 行内编辑交互
- **进入编辑**: 点击"编辑"按钮，行背景变为黄色，显示输入控件
- **保存编辑**: 点击"保存"按钮验证并保存数据
- **取消编辑**: 点击"取消"按钮恢复原始数据
- **验证规则**: 名称必填，显示顺序必须大于0

## 3. 字段说明

### 3.1 变量组基本信息字段
- **变量组类型** (必填)
  - 静态属性组：用于存储设备的基础属性信息
  - 业务变量组：用于存储业务相关的统计变量
  - 动态变量组：用于存储设备运行时的动态变量

- **变量组名称** (必填)
  - 类型：文本
  - 长度：最大50个字符
  - 说明：变量组的唯一标识名称

- **描述** (可选)
  - 类型：多行文本
  - 长度：最大200个字符
  - 说明：变量组的详细描述信息

- **显示顺序** (必填)
  - 类型：数字
  - 范围：1-999
  - 说明：控制变量组在列表中的显示顺序

- **状态** (必填)
  - 启用：变量组正常使用
  - 禁用：变量组暂停使用

### 3.2 变量定义字段
- **变量名称** (必填)
  - 类型：文本
  - 长度：最大50个字符
  - 说明：变量的显示名称

- **变量编码** (必填)
  - 类型：文本
  - 长度：最大30个字符
  - 说明：变量的唯一标识编码，不可重复

- **数据类型** (必填)
  - 字符串：文本类型数据
  - 数值：数字类型数据
  - 布尔值：true/false类型数据
  - 日期时间：日期时间类型数据
  - 数组：数组类型数据
  - 对象：对象类型数据

- **精度** (可选)
  - 类型：数字
  - 范围：0-10
  - 说明：数值类型的小数位数精度

- **单位** (可选)
  - 类型：文本
  - 长度：最大20个字符
  - 说明：变量的计量单位

- **分类** (可选，根据变量组类型动态调整)
  - 静态属性组：无分类选项
  - 业务变量组：累计数据、计算数据
  - 动态变量组：实时数据、累计数据、状态数据、计算数据

- **采集频率** (可选)
  - 1秒、5秒、10秒、30秒
  - 1分钟、5分钟、10分钟
  - 1小时、1天
  - 手动采集
  - 说明：变量的数据采集频率

- **描述** (可选)
  - 类型：文本
  - 长度：最大200个字符
  - 说明：变量的详细描述信息

### 3.3 列表显示字段
- **变量组名称**: 显示变量组的名称
- **描述**: 显示变量组的描述信息
- **类型**: 显示变量组类型（带颜色标识）
- **包含变量数**: 显示该变量组包含的变量数量
- **显示顺序**: 显示变量组的显示顺序
- **状态**: 显示变量组状态（启用/禁用，带颜色标识）

## 4. 业务规则

### 4.1 变量组管理规则
- 变量组名称在同一类型下必须唯一
- 删除变量组前需确认，删除后无法恢复
- 变量组状态变更不影响已配置的变量定义

### 4.2 变量管理规则
- 变量编码在同一变量组内必须唯一
- 变量类型由变量组类型决定，不可跨类型
- 静态属性组不包含分类和采集频率字段
- 数值类型变量可设置精度，其他类型忽略精度设置

### 4.3 数据验证规则
- 必填字段不能为空
- 变量编码格式：只能包含字母、数字、下划线
- 显示顺序：必须为正整数
- 精度：必须在0-10范围内

### 4.4 界面交互规则
- 抽屉支持拖拽关闭（向下拖拽超过100px）
- 行内编辑时其他行不可同时编辑
- 保存操作前进行数据完整性验证
- 操作成功后显示确认提示 