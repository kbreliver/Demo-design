# 可视化看板设计器 - 产品需求文档（PRD）

> 本文档基于可视化看板构建流程图，详细描述看板设计器模块的核心功能需求和数据基础要求。

---

## 一、功能目标

### 1.1 核心目标
- **构建数据可视化平台**：提供强大的看板设计能力，将复杂的数据转化为直观的可视化展示
- **实现灵活数据绑定**：支持从资产实例和变量中灵活获取数据，实现数据的动态展示
- **提供丰富交互体验**：通过图标组件和交互联动，为用户提供沉浸式的数据探索体验
- **确保安全访问控制**：通过权限管理机制，确保看板的安全访问和数据保护

### 1.2 业务价值
- 提升数据可视化效果，增强决策支持能力
- 降低看板开发门槛，提高业务人员自主设计能力
- 支持多维度数据展示，实现业务全景监控
- 保障数据安全，满足企业级安全合规要求

---

## 二、功能描述

### 2.1 数据源绑定

#### 2.1.1 数据源选择
- **功能描述**：从资产实例或变量中获取数据，为看板提供数据支撑
- **数据源类型**：
  - 资产实例数据：设备状态、运行参数、告警信息
  - 变量数据：实时数据、历史数据、计算指标
  - 业务数据：KPI指标、统计报表、趋势分析
  - 外部数据：第三方系统数据、API接口数据

#### 2.1.2 数据绑定配置
- 数据源连接和认证配置
- 数据查询条件和过滤规则
- 数据刷新频率和更新策略
- 数据格式转换和预处理

### 2.2 图标组件

#### 2.2.1 组件类型
- **功能描述**：提供丰富的可视化组件，支持多种数据展示方式
- **组件分类**：
  - 图表组件：柱状图、折线图、饼图、散点图
  - 仪表盘组件：仪表盘、进度条、环形图
  - 表格组件：数据表格、交叉表、明细表
  - 地图组件：地理分布图、热力图、路径图
  - 文本组件：标题、标签、数值显示
  - 媒体组件：图片、视频、3D模型

#### 2.2.2 组件配置
- 组件样式和主题设置
- 数据映射和字段绑定
- 组件布局和位置调整
- 组件大小和缩放控制

### 2.3 交互联动

#### 2.3.1 交互功能
- **功能描述**：配置组件间的交互联动，实现动态数据展示和用户操作响应
- **交互类型**：
  - 点击交互：点击组件触发数据钻取、详情展示
  - 悬停交互：悬停显示数据提示、高亮相关组件
  - 筛选交互：组件间数据筛选、条件联动
  - 钻取交互：数据层级钻取、多维度分析
  - 联动交互：组件间数据联动、状态同步

#### 2.3.2 联动配置
- 交互触发条件和事件定义
- 联动目标和数据传递规则
- 交互效果和动画设置
- 交互日志和操作记录

### 2.4 权限管理

#### 2.4.1 访问控制
- **功能描述**：管理看板的访问权限，确保数据安全和合规使用
- **权限类型**：
  - 查看权限：允许用户查看看板内容
  - 编辑权限：允许用户修改看板配置
  - 发布权限：允许用户发布和分享看板
  - 管理权限：允许用户管理看板权限

#### 2.4.2 权限配置
- 用户角色和权限分配
- 数据行级权限控制
- 时间范围权限限制
- 权限继承和传递规则

### 2.5 看板发布

#### 2.5.1 发布流程
- **功能描述**：将设计完成的看板发布到生产环境，供用户访问使用
- **发布步骤**：
  - 看板配置验证和检查
  - 数据源连接测试
  - 权限配置确认
  - 发布环境选择和部署

#### 2.5.2 发布管理
- 版本管理和回滚机制
- 发布审批和流程控制
- 发布状态监控和通知
- 发布日志和审计记录

---

## 三、前置条件（数据基础）

### 3.1 资产实例数据

#### 3.1.1 实例基础信息
- **数据要求**：
  - 资产实例创建和配置信息
  - 实例属性和参数定义
  - 实例状态和运行信息
  - 实例间关联关系
  - 实例历史变更记录

#### 3.1.2 实例运行数据
- 设备实时运行状态
- 设备性能参数数据
- 设备告警和事件信息
- 设备维护和保养记录
- 设备历史运行统计

### 3.2 变量数据

#### 3.2.1 变量定义数据
- **数据要求**：
  - 变量名称、编码、单位
  - 变量数据类型和范围
  - 变量数据源配置
  - 变量采集频率和策略
  - 变量历史数据存储

#### 3.2.2 变量实时数据
- 传感器采集的实时数据
- 控制系统输出的数据
- 计算得出的派生数据
- 外部系统接入的数据
- 数据质量状态信息

### 3.3 业务指标数据

#### 3.3.1 指标定义数据
- **数据要求**：
  - 业务指标名称和编码
  - 指标计算公式和规则
  - 指标计算周期和频率
  - 指标阈值和告警配置
  - 指标历史数据和趋势

#### 3.3.2 指标计算数据
- KPI指标计算结果
- 统计分析和报表数据
- 趋势预测和分析数据
- 对比分析和排名数据
- 指标可视化配置

### 3.4 用户权限数据

#### 3.4.1 用户基础信息
- **数据要求**：
  - 用户账号和身份信息
  - 用户角色和部门信息
  - 用户权限和访问控制
  - 用户偏好和设置
  - 用户操作日志记录

#### 3.4.2 权限配置数据
- 角色权限定义和分配
- 数据访问权限规则
- 功能操作权限配置
- 权限继承和传递关系
- 权限变更历史记录

### 3.5 看板配置数据

#### 3.5.1 看板基础配置
- **数据要求**：
  - 看板名称、描述、分类
  - 看板布局和主题设置
  - 看板组件配置信息
  - 看板数据源绑定关系
  - 看板版本和发布状态

#### 3.5.2 组件配置数据
- 组件类型和样式配置
- 组件数据映射关系
- 组件交互和联动规则
- 组件布局和位置信息
- 组件状态和显示控制 