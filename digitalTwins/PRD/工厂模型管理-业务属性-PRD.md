# 工厂模型管理 - 业务属性 PRD文档

## 1. 功能目标

### 1.1 业务属性管理
- 提供资产类型业务属性的配置和管理功能
- 支持业务属性的实时编辑和验证
- 实现业务属性配置的批量操作
- 提供业务属性的数据绑定功能

### 1.2 业务属性配置
- 支持业务属性的数据类型和验证规则配置
- 提供业务属性的必填性和默认值设置
- 实现业务属性的数据绑定和关联
- 支持业务属性的分类和排序管理

## 2. 功能描述

### 2.1 业务属性列表
- **属性名称**：显示和编辑业务属性的标识名称
- **属性编码**：显示和编辑属性的唯一编码
- **数据类型**：支持字符串、数值、布尔值、日期、日期时间、枚举等类型
- **是否必填**：标识属性是否为必填项
- **默认值**：支持设置属性的默认值

### 2.2 业务属性配置
- **属性描述**：提供属性的详细说明和用途描述
- **验证规则**：支持自定义验证规则和约束条件
- **显示顺序**：控制属性在界面中的显示顺序
- **分组分类**：支持属性的分组和分类管理

### 2.3 数据绑定功能
- **绑定数据**：支持业务属性与数据源的绑定配置
- **数据映射**：实现业务属性与数据点位的映射关系
- **绑定状态**：显示数据绑定的状态和配置信息
- **数据同步**：支持业务属性数据的实时同步

### 2.4 批量操作功能
- **批量编辑**：支持批量编辑业务属性参数
- **批量删除**：支持批量删除选中的业务属性
- **批量导入**：支持从外部文件批量导入业务属性
- **批量导出**：支持将业务属性配置导出到外部文件

## 3. 交互说明

### 3.1 页面加载
- 页面加载时根据选择的资产类型加载业务属性列表
- 初始化属性配置表单和验证规则
- 加载可用的数据源和数据点位
- 设置表格的编辑模式和显示模式

### 3.2 属性配置操作
- 点击编辑按钮进入属性编辑模式
- 支持属性的实时编辑和验证
- 提供属性配置的保存和取消操作
- 支持属性配置的复制和删除

### 3.3 数据绑定操作
- 点击绑定数据按钮打开数据源选择对话框
- 支持数据源和数据点位的选择配置
- 提供数据绑定的测试和验证功能
- 支持数据绑定的解除和重新配置

### 3.4 批量操作
- 选择多个属性进行批量操作
- 支持批量编辑属性参数
- 提供批量删除的确认操作
- 支持批量数据绑定的配置

## 4. 业务规则

### 4.1 业务属性规则
- 属性名称不能为空，长度限制1-50字符
- 属性编码在同一资产类型下必须唯一
- 属性数据类型必须符合系统支持的类型
- 必填属性不能为空，必须有默认值或绑定数据

### 4.2 数据类型规则
- 字符串类型：长度限制1-200字符
- 数值类型：支持整数和小数，范围限制
- 日期类型：格式为YYYY-MM-DD
- 日期时间类型：格式为YYYY-MM-DD HH:mm:ss
- 布尔类型：true/false值
- 枚举类型：从预定义选项中选择

### 4.3 数据绑定规则
- 数据源必须已配置并连接正常
- 数据点位必须存在于选定的数据源中
- 数据类型必须与属性类型匹配
- 数据绑定配置需要验证连接状态

### 4.4 验证规则
- 支持长度限制、数值范围、正则表达式等验证
- 验证规则必须符合数据类型要求
- 验证失败时提供清晰的错误提示
- 支持自定义验证规则的配置

### 4.5 权限控制规则
- 业务属性编辑需要管理员权限
- 数据绑定配置需要数据管理权限
- 批量操作需要相应权限
- 权限不足时显示提示信息

## 5. 前置条件

### 5.1 系统前置条件
- 资产类型已定义并配置
- 数据源已配置并连接正常
- 数据点位已定义并可用
- 用户权限已配置

### 5.2 数据前置条件
- 业务属性定义已初始化
- 验证规则配置已加载
- 数据源列表已获取
- 数据点位列表已加载

### 5.3 用户前置条件
- 用户已登录系统
- 用户具有业务属性配置权限
- 用户具有数据绑定配置权限
- 用户具有批量操作权限

## 6. 字段说明

### 6.1 业务属性字段

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| id | String | 是 | 属性唯一标识 | property_1234567890 |
| name | String | 是 | 属性名称 | 设备编号 |
| code | String | 是 | 属性编码 | device_code |
| type | String | 是 | 数据类型 | 字符串 |
| required | Boolean | 是 | 是否必填 | true |
| defaultValue | String | 否 | 默认值 | DEV001 |
| description | String | 否 | 属性描述 | 设备的唯一编号 |
| validation | Object | 否 | 验证规则 | {minLength: 1, maxLength: 20} |
| order | Number | 否 | 显示顺序 | 1 |
| group | String | 否 | 属性分组 | 基本信息 |
| dataBinding | Object | 否 | 数据绑定配置 | {dataSource: "OPC", point: "DEV001"} |
| status | String | 是 | 属性状态 | active/inactive |

### 6.2 数据类型枚举

| 类型值 | 显示名称 | 说明 | 验证规则 |
|--------|----------|------|----------|
| 字符串 | 字符串 | 文本类型 | 长度1-200字符 |
| 数值 | 数值 | 数字类型 | 支持整数和小数 |
| 布尔值 | 布尔值 | 布尔类型 | true/false |
| 日期 | 日期 | 日期类型 | 格式YYYY-MM-DD |
| 日期时间 | 日期时间 | 日期时间类型 | 格式YYYY-MM-DD HH:mm:ss |
| 枚举 | 枚举 | 枚举类型 | 预定义选项列表 |

### 6.3 验证规则字段

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| minLength | Number | 否 | 最小长度 | 1 |
| maxLength | Number | 否 | 最大长度 | 50 |
| minValue | Number | 否 | 最小值 | 0 |
| maxValue | Number | 否 | 最大值 | 1000 |
| pattern | String | 否 | 正则表达式 | ^[A-Z0-9]+$ |
| message | String | 否 | 错误提示信息 | 请输入有效的设备编号 |
| required | Boolean | 否 | 是否必填 | true |
| unique | Boolean | 否 | 是否唯一 | false |

### 6.4 数据绑定配置字段

| 字段名 | 类型 | 必填 | 说明 | 示例值 |
|--------|------|------|------|--------|
| dataSource | String | 是 | 数据源名称 | OPC_Server |
| dataSourceId | String | 是 | 数据源ID | opc_001 |
| point | String | 是 | 数据点位名称 | DEV001 |
| pointId | String | 是 | 数据点位ID | point_001 |
| address | String | 否 | 数据地址 | DB1.DBD100 |
| dataType | String | 是 | 数据类型 | String |
| description | String | 否 | 点位描述 | 设备编号点位 |
| status | String | 是 | 连接状态 | connected/disconnected |
| syncMode | String | 否 | 同步模式 | realtime/batch |
| syncInterval | Number | 否 | 同步间隔(秒) | 30 | 