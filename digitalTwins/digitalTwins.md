# 数字孪生平台 - 模型层产品需求文档（PRD）

> 本文档为模型层核心功能的页面级产品需求说明，结合资产驱动设计思想与工业建模平台的最佳实践，适用于水泥行业数字孪生系统。

---

## 一、项目概述

- **项目名称**：数字孪生平台 - 模型层模块（资产驱动架构）
- **背景与目标**：统一资产模型、数据变量、可视化资源与运行监控能力，为水泥行业提供可配置、可监测、可模拟的建模平台。
- **目标用户**：模型管理员、数据工程师、工艺专家、仿真工程师、运维工程师
- **平台角色**：建模者（配置与发布）、运维者（监控与诊断）、观察者（查看）

---

## 二、功能页面结构

```
资产建模中心
├─ [P1] 资产类型管理
│   ├─ P1.1 类型基本信息
│   ├─ P1.2 静态属性定义
│   ├─ P1.3 动态变量模板定义
│   ├─ P1.4 数据加工规则模板
│   ├─ P1.5 指标卡片模板
│   ├─ P1.6 告警规则模板
│   └─ P1.7 几何/组态模型模板
│
├─ [P2] 工厂资产管理
│   ├─ P2.1 资产结构树管理
│   ├─ P2.2 资产实例信息维护
│   ├─ P2.3 动态变量数据绑定
│   ├─ P2.4 数据加工规则应用
│   ├─ P2.5 指标卡片配置
│   ├─ P2.6 告警规则实例化
│   └─ P2.7 模型组件绑定

可视化与仿真中心
├─ [P3] 实时监控驾驶舱
├─ [P4] 异常告警与诊断
├─ [P5] 可视化配置（组态/3D）
├─ [P6] 仿真模型配置与执行
```

---

## 三、页面级产品功能说明（按编号）

### [P1] 资产类型管理

#### P1.1 类型基本信息

- 类型名称、描述、分类标签、状态、版本号、是否可被继承
- 继承关系（支持父类型）

#### P1.2 静态属性定义

- 字段名、数据类型、单位、是否必填、显示优先级

#### P1.3 动态变量模板定义

- 变量标识符、采集周期、数据类型、来源类型（OT/IT）、单位、描述
- 元数据项：质量等级、精度、上下限、异常值处理方式

#### P1.4 数据加工规则模板

- 拖拽式图形编排器：聚合、去噪、校正、重采样等
- 支持定义输入变量、处理流程、输出变量、时窗参数

#### P1.5 指标卡片模板

- 卡片类型（数字、图表、状态灯）
- 显示字段、计算规则、单位、异常阈值
- 支持绑定多个加工变量与表达式

#### P1.6 告警规则模板

- 触发条件表达式、等级、联动操作（通知、接口、工单）
- 支持“变化率”、“连续异常”、“边界判断”类型

#### P1.7 几何/组态模型模板

- 上传并管理3D模型/2D组态图
- 标注映射点、组件编号、初始动画逻辑

---

### [P2] 工厂资产管理

#### P2.1 资产结构树管理

- 拖拽构建结构层级，支持工厂/产线/工段/设备级定义
- 节点关联资产类型

#### P2.2 资产实例信息维护

- 继承资产类型字段，支持覆盖默认值
- 可导入/导出结构树 JSON

#### P2.3 动态变量数据绑定

- 数据点映射：选择数据源、变量名、采集方式（OPC UA、MQTT、REST）
- 实时查看数据质量与样本曲线

#### P2.4 数据加工规则应用

- 从模板中选择规则，绑定资产变量作为输入
- 配置参数覆盖、设置输出变量

#### P2.5 指标卡片配置

- 基于资产实例生成卡片：选择模板 + 输出变量
- 设置展示位置、单位、上下限、显示周期

#### P2.6 告警规则实例化

- 继承规则模板或自定义实例级告警逻辑
- 绑定具体变量或卡片值，配置通知方式

#### P2.7 模型组件绑定

- 资产结构节点 ↔ 模型组件映射
- 变量 ↔ 模型属性驱动（颜色、动画、状态）

---

### [P3] 实时监控驾驶舱

- 结构导航栏 + 运行状态卡片（绿色/黄色/红色）
- 实时变量曲线、状态变化日志
- 联动 3D 视图或组态图高亮异常部件

### [P4] 异常告警与诊断

- 告警列表、确认、备注、转派、关闭流程
- 历史告警统计（资产/类型/时间）
- 变量趋势对比分析、根因追踪

### [P5] 可视化配置（组态/3D）

- 拖拽组件布局，配置绑定变量/状态/行为
- 配置联动动画、异常闪烁、关联链接
- 保存为页面模板，可在驾驶舱中复用

### [P6] 仿真模型配置与执行

- 上传 FMU、配置输入输出
- 手动/自动触发模拟，查看模拟结果
- 变量与可视化联动回放

---