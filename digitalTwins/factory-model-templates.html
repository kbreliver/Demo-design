<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥å‚æ¨¡å‹æ¨¡æ¿ - æ•°å­—å­ªç”Ÿå¹³å°</title>
    <link rel="preload" href="assets/fonts/element-icons.woff" as="font" type="font/woff" crossorigin>
    <link rel="preload" href="assets/fonts/element-icons.ttf" as="font" type="font/ttf" crossorigin>
    <link rel="stylesheet" href="assets/element-ui.css">
    <style>
        /* æ ·å¼å±‚ - åªåŒ…å«è‡ªå®šä¹‰æ ·å¼ */
        .template-container {
            padding: 20px;
            background-color: #f5f7fa;
            min-height: 100vh;
        }

        .page-header {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #303133;
            margin-bottom: 10px;
        }

        .page-description {
            color: #606266;
            font-size: 14px;
        }

        .content-card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .card-header {
            padding: 20px;
            border-bottom: 1px solid #e4e7ed;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #303133;
        }

        .search-bar {
            padding: 20px;
            border-bottom: 1px solid #e4e7ed;
            background-color: #fafafa;
        }

        .search-row {
            display: flex;
            gap: 16px;
            align-items: center;
            margin-bottom: 12px;
            justify-content: space-between;
        }

        .search-controls {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .filter-tabs {
            display: flex;
            gap: 8px;
        }

        .template-grid {
            padding: 20px;
        }

        .template-card {
            border: 1px solid #e4e7ed;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
            background-color: #fff;
            height: 100%;
            display: flex;
            flex-direction: column;
            min-height: 240px;
        }

        .template-card:hover {
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .template-header {
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
            background-color: #fafafa;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .template-title-section {
            flex: 1;
            min-width: 0;
        }

        .template-title {
            font-size: 18px;
            font-weight: 600;
            color: #303133;
            margin-bottom: 6px;
            cursor: pointer;
            transition: color 0.3s;
            line-height: 1.4;
            word-break: break-word;
        }

        .template-title:hover {
            color: #409eff;
        }

        .template-subtitle {
            font-size: 13px;
            color: #909399;
            line-height: 1.3;
        }

        .template-actions-header {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            justify-content: space-between;
            padding-top: 8px;
            border-top: 1px solid #e4e7ed;
            align-items: center;
        }

        .template-stats-mini {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .stat-item-mini {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 35px;
        }

        .stat-number-mini {
            font-size: 14px;
            font-weight: 600;
            color: #409eff;
            line-height: 1;
        }

        .stat-label-mini {
            font-size: 10px;
            color: #909399;
            margin-top: 2px;
            line-height: 1;
        }

        .template-actions-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .template-actions-buttons .el-button {
            margin: 0;
            width: 32px;
            height: 32px;
            padding: 0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .template-actions-buttons .el-button i {
            font-size: 14px;
        }

        .template-actions-buttons .el-button--primary.is-plain {
            color: #409eff;
            background-color: #fff;
            border-color: #409eff;
        }

        .template-actions-buttons .el-button--primary.is-plain:hover {
            color: #fff;
            background-color: #409eff;
            border-color: #409eff;
        }

        .template-actions-buttons .el-button--success.is-plain {
            color: #67c23a;
            background-color: #fff;
            border-color: #67c23a;
        }

        .template-actions-buttons .el-button--success.is-plain:hover {
            color: #fff;
            background-color: #67c23a;
            border-color: #67c23a;
        }

        .template-actions-buttons .el-button--danger {
            color: #fff;
            background-color: #f56c6c;
            border-color: #f56c6c;
        }

        .template-actions-buttons .el-button--danger:hover {
            background-color: #f78989;
            border-color: #f78989;
        }

        .template-body {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .template-description {
            font-size: 14px;
            color: #606266;
            line-height: 1.5;
            margin-bottom: 16px;
            flex: 1;
        }

        .template-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: #909399;
            margin-bottom: 16px;
        }

        .template-footer {
            padding: 16px 20px;
            border-top: 1px solid #f0f0f0;
            background-color: #fafafa;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
            align-items: center;
        }

        .template-footer .el-button {
            margin: 0;
            width: 32px;
            height: 32px;
            padding: 0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .template-footer .el-button i {
            font-size: 14px;
        }

        .template-footer .el-button--primary.is-plain {
            color: #409eff;
            background-color: #fff;
            border-color: #409eff;
        }

        .template-footer .el-button--primary.is-plain:hover {
            color: #fff;
            background-color: #409eff;
            border-color: #409eff;
        }

        .template-footer .el-button--success.is-plain {
            color: #67c23a;
            background-color: #fff;
            border-color: #67c23a;
        }

        .template-footer .el-button--success.is-plain:hover {
            color: #fff;
            background-color: #67c23a;
            border-color: #67c23a;
        }

        .template-footer .el-button--danger {
            color: #fff;
            background-color: #f56c6c;
            border-color: #f56c6c;
        }

        .template-footer .el-button--danger:hover {
            background-color: #f78989;
            border-color: #f78989;
        }

        .template-tag {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            margin-left: 10px;
            white-space: nowrap;
        }

        .tag-standard {
            background-color: #e1f3ff;
            color: #409eff;
        }

        .tag-custom {
            background-color: #f0f9ff;
            color: #67c23a;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #909399;
        }

        .empty-state-icon {
            font-size: 64px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 16px;
            margin-bottom: 16px;
        }

        .template-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 12px;
            justify-content: flex-start;
        }

        .stat-card {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: flex-start;
            padding: 8px 12px;
            border-radius: 8px;
            min-width: auto;
            min-height: auto;
            transition: all 0.3s ease;
            cursor: pointer;
            gap: 6px;
        }

        .stat-card:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .stat-card-text {
            font-size: 12px;
            font-weight: 500;
            line-height: 1;
            white-space: nowrap;
        }

        .stat-card-number {
            font-size: 14px;
            font-weight: 600;
            line-height: 1;
            white-space: nowrap;
        }

        /* æ€»æ¨¡æ¿æ•° - æ©™è‰²ç³» */
        .stat-card-total {
            background-color: #fff3e0;
            color: #e65100;
        }

        .stat-card-total .stat-card-number {
            color: #e65100;
        }

        /* æ ‡å‡†æ¨¡æ¿ - ç»¿è‰²ç³» */
        .stat-card-standard {
            background-color: #e8f5e8;
            color: #2e7d32;
        }

        .stat-card-standard .stat-card-number {
            color: #2e7d32;
        }

        /* è‡ªå®šä¹‰æ¨¡æ¿ - ç²‰è‰²ç³» */
        .stat-card-custom {
            background-color: #fce4ec;
            color: #c2185b;
        }

        .stat-card-custom .stat-card-number {
            color: #c2185b;
        }

        /* å“åº”å¼å¸ƒå±€ä¼˜åŒ– */
        @media (max-width: 1400px) {
            .template-header {
                gap: 12px;
            }
            
            .template-actions-header {
                flex-direction: row;
                gap: 6px;
                align-items: center;
                justify-content: space-between;
            }
            
            .template-stats-mini {
                gap: 10px;
            }
            
            .stat-item-mini {
                min-width: 30px;
            }
            
            .stat-number-mini {
                font-size: 12px;
            }
            
            .stat-label-mini {
                font-size: 9px;
            }
            
            .template-actions-buttons .el-button {
                width: auto;
                margin: 0;
            }
            
            .template-stats {
                gap: 16px;
            }
            
            .stat-card {
                padding: 6px 10px;
                gap: 4px;
            }
            
            .stat-card-text {
                font-size: 11px;
            }
            
            .stat-card-number {
                font-size: 13px;
            }
        }

        @media (max-width: 768px) {
            .template-header {
                gap: 10px;
            }
            
            .template-actions-header {
                margin-top: 0;
                flex-direction: row;
                justify-content: space-between;
                gap: 6px;
            }
            
            .template-stats-mini {
                gap: 6px;
            }
            
            .stat-item-mini {
                min-width: 25px;
            }
            
            .template-body {
                min-height: 100px;
            }
            
            .template-stats {
                gap: 12px;
                flex-wrap: wrap;
                justify-content: flex-start;
            }
            
            .stat-card {
                padding: 5px 8px;
                gap: 3px;
            }
            
            .stat-card-text {
                font-size: 10px;
            }
            
            .stat-card-number {
                font-size: 12px;
            }
            
            .stat-number-mini {
                font-size: 11px;
            }
            
            .stat-label-mini {
                font-size: 8px;
            }
        }
    </style>
</head>
<body>
    <div id="app" class="template-container">
        <!-- é¡µé¢å¤´éƒ¨
        <div class="page-header">
            <h1 class="page-title">{{ pageTitle }}</h1>
            <p class="page-description">{{ pageDescription }}</p>
        </div> -->

        <!-- ä¸»è¦å†…å®¹ -->
        <div class="content-card">
            
            <!-- æœç´¢å’Œç­›é€‰ -->
            <div class="search-bar">
                <!-- ç»Ÿè®¡ä¿¡æ¯ -->
                <div class="template-stats">
                    <div class="stat-card stat-card-total">
                        <span class="stat-card-text">æ€»æ¨¡æ¿æ•°</span>
                        <span class="stat-card-number">{{ totalTemplates }}</span>
                    </div>
                    <div class="stat-card stat-card-standard">
                        <span class="stat-card-text">æ ‡å‡†æ¨¡æ¿</span>
                        <span class="stat-card-number">{{ standardTemplates }}</span>
                    </div>
                    <div class="stat-card stat-card-custom">
                        <span class="stat-card-text">è‡ªå®šä¹‰æ¨¡æ¿</span>
                        <span class="stat-card-number">{{ customTemplates }}</span>
                    </div>
                </div>
                
                <div class="search-row">
                    <div class="search-controls">
                        <el-input 
                            v-model="searchKeyword" 
                            placeholder="æœç´¢æ¨¡æ¿åç§°æˆ–æè¿°..." 
                            prefix-icon="el-icon-search"
                            clearable
                            style="width: 300px;">
                        </el-input>
                        <el-select v-model="selectedCategory" placeholder="é€‰æ‹©åˆ†ç±»" style="width: 150px;">
                            <el-option label="å…¨éƒ¨åˆ†ç±»" value="all"></el-option>
                            <el-option label="æ ‡å‡†æ¨¡æ¿" value="standard"></el-option>
                            <el-option label="è‡ªå®šä¹‰æ¨¡æ¿" value="custom"></el-option>
                        </el-select>
                        <el-select v-model="selectedStatus" placeholder="é€‰æ‹©çŠ¶æ€" style="width: 120px;">
                            <el-option label="å…¨éƒ¨çŠ¶æ€" value="all"></el-option>
                            <el-option label="å·²å‘å¸ƒ" value="published"></el-option>
                            <el-option label="æœªå‘å¸ƒ" value="unpublished"></el-option>
                        </el-select>
                    </div>
                    <el-button type="primary" @click="createCustomTemplate" icon="el-icon-plus">
                        åˆ›å»ºæ¨¡æ¿
                    </el-button>
                </div>
            </div>

            <!-- æ¨¡æ¿ç½‘æ ¼ -->
            <div class="template-grid">
                <el-row :gutter="24">
                    <el-col 
                        :xs="24" 
                        :sm="12" 
                        :md="8" 
                        :lg="6" 
                        v-for="template in filteredTemplates" 
                        :key="template.id"
                        style="margin-bottom: 24px;">
                        <div class="template-card">
                            <div class="template-header">
                                <div class="template-title-section">
                                    <div class="template-title" @click="openFactoryModel(template)">
                                        {{ template.name }}
                                        <span class="template-tag" :class="getTagClass(template.category)">
                                            {{ template.category === 'standard' ? 'æ ‡å‡†' : 'è‡ªå®šä¹‰' }}
                                        </span>
                                    </div>
                                    <div class="template-subtitle">{{ template.subtitle }}</div>
                                </div>
                                <div class="template-actions-header">
                                    <div class="template-stats-mini">
                                        <div class="stat-item-mini">
                                            <span class="stat-number-mini">{{ getNodeCount(template) }}</span>
                                            <span class="stat-label-mini">èŠ‚ç‚¹æ•°</span>
                                        </div>
                                        <div class="stat-item-mini">
                                            <span class="stat-number-mini">{{ template.instanceCount || 0 }}</span>
                                            <span class="stat-label-mini">å®ä¾‹åŒ–</span>
                                        </div>
                                        <div class="stat-item-mini">
                                            <span class="stat-number-mini">{{ template.copyCount || 0 }}</span>
                                            <span class="stat-label-mini">å¤åˆ¶</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="template-body">
                                <div class="template-description">
                                    {{ template.description }}
                                </div>
                                <div class="template-meta">
                                    <span>åˆ›å»ºæ—¶é—´ï¼š{{ template.createTime }}</span>
                                    <el-tag 
                                        :type="template.status === 'published' ? 'success' : 'info'" 
                                        size="small">
                                        {{ template.status === 'published' ? 'å·²å‘å¸ƒ' : 'æœªå‘å¸ƒ' }}
                                    </el-tag>
                                </div>
                            </div>
                            <div class="template-footer">
                                <el-tooltip :content="template.status === 'published' ? 'åˆ›å»ºå·¥å‚æ¨¡å‹' : 'åªæœ‰å·²å‘å¸ƒçš„æ¨¡æ¿æ‰èƒ½åˆ›å»ºå·¥å‚æ¨¡å‹'" placement="top">
                                    <el-button 
                                        type="primary" 
                                        size="small" 
                                        icon="el-icon-s-management"
                                        circle
                                        @click="createFactoryModel(template)"
                                        :disabled="template.status !== 'published'">
                                    </el-button>
                                </el-tooltip>
                                <el-tooltip content="å¤åˆ¶æ¨¡æ¿" placement="top">
                                    <el-button 
                                        type="success" 
                                        size="small" 
                                        icon="el-icon-document-copy"
                                        circle
                                        plain
                                        @click="copyTemplate(template)">
                                    </el-button>
                                </el-tooltip>
                                <el-tooltip content="ç¼–è¾‘æ¨¡æ¿" placement="top" v-if="template.category === 'custom'">
                                    <el-button 
                                        type="primary" 
                                        size="small" 
                                        icon="el-icon-edit"
                                        circle
                                        plain
                                        @click="editTemplate(template)">
                                    </el-button>
                                </el-tooltip>
                                <el-tooltip content="åˆ é™¤æ¨¡æ¿" placement="top" v-if="template.category === 'custom'">
                                    <el-button 
                                        type="danger" 
                                        size="small" 
                                        icon="el-icon-delete"
                                        circle
                                        @click="deleteTemplate(template)">
                                    </el-button>
                                </el-tooltip>
                            </div>
                        </div>
                    </el-col>
                </el-row>

                <!-- ç©ºçŠ¶æ€ -->
                <div class="empty-state" v-if="filteredTemplates.length === 0">
                    <div class="empty-state-icon">ğŸ“‹</div>
                    <div class="empty-state-text">æš‚æ— ç¬¦åˆæ¡ä»¶çš„æ¨¡æ¿</div>
                    <el-button type="primary" @click="createCustomTemplate">
                        åˆ›å»ºç¬¬ä¸€ä¸ªæ¨¡æ¿
                    </el-button>
                </div>
            </div>
        </div>

        <!-- åˆ›å»ºå·¥å‚æ¨¡å‹å¯¹è¯æ¡† -->
        <el-dialog
            title="åˆ›å»ºå·¥å‚æ¨¡å‹"
            :visible.sync="createDialogVisible"
            width="520px"
            :close-on-click-modal="false">
            <el-form :model="createForm" label-width="110px">
                <el-form-item label="æ‰€å±ç»„ç»‡">
                    <el-popover
                        ref="orgTreePopover"
                        placement="bottom-start"
                        width="320"
                        trigger="click"
                        :append-to-body="true">
                        <el-tree
                            :data="orgTree"
                            node-key="id"
                            :props="orgTreeProps"
                            :expand-on-click-node="false"
                            default-expand-all
                            @node-click="onOrgNodeClick">
                            <span slot-scope="{ data }">
                                <i :class="getOrgIcon(data.type)" style="margin-right:6px;color:#909399;"></i>
                                <span>{{ data.name }}</span>
                                <el-tag v-if="data.type" size="mini" style="margin-left:8px;" type="info">{{ data.type }}</el-tag>
                            </span>
                        </el-tree>
                        <el-input
                            slot="reference"
                            v-model="createForm.orgName"
                            placeholder="è¯·é€‰æ‹©å·¥å‚"
                            readonly>
                            <i slot="suffix" class="el-input__icon el-icon-arrow-down"></i>
                        </el-input>
                    </el-popover>
                </el-form-item>

                <el-form-item label="å·¥å‚æ¨¡å‹æ¨¡æ¿">
                    <el-input v-model="createForm.templateName" placeholder="æ¨¡æ¿åç§°" readonly></el-input>
                </el-form-item>
            </el-form>
            <div slot="footer" class="dialog-footer">
                <el-button @click="closeCreateDialog">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="confirmCreateModel">ç¡®å®š</el-button>
            </div>
        </el-dialog>

        <!-- æ¨¡æ¿è¯¦æƒ…å¯¹è¯æ¡† -->
        <el-dialog 
            :title="selectedTemplate ? selectedTemplate.name : 'æ¨¡æ¿è¯¦æƒ…'" 
            :visible.sync="templateDetailVisible" 
            width="600px">
            <div v-if="selectedTemplate">
                <el-descriptions :column="2" border>
                    <el-descriptions-item label="æ¨¡æ¿åç§°">{{ selectedTemplate.name }}</el-descriptions-item>
                    <el-descriptions-item label="æ¨¡æ¿ç±»å‹">
                        <el-tag :type="selectedTemplate.category === 'standard' ? 'primary' : 'success'">
                            {{ selectedTemplate.category === 'standard' ? 'æ ‡å‡†æ¨¡æ¿' : 'è‡ªå®šä¹‰æ¨¡æ¿' }}
                        </el-tag>
                    </el-descriptions-item>
                    <el-descriptions-item label="åˆ›å»ºæ—¶é—´">{{ selectedTemplate.createTime }}</el-descriptions-item>
                    <el-descriptions-item label="çŠ¶æ€">
                        <el-tag :type="selectedTemplate.status === 'published' ? 'success' : 'info'">
                            {{ selectedTemplate.status === 'published' ? 'å·²å‘å¸ƒ' : 'æœªå‘å¸ƒ' }}
                        </el-tag>
                    </el-descriptions-item>
                    <el-descriptions-item label="æè¿°" :span="2">{{ selectedTemplate.description }}</el-descriptions-item>
                </el-descriptions>
                
                <el-divider content-position="left">å±‚çº§ç»“æ„</el-divider>
                <div class="structure-tree" v-html="selectedTemplate.structure"></div>
                
                <el-divider content-position="left">èŠ‚ç‚¹ç±»å‹</el-divider>
                <el-tag 
                    v-for="nodeType in selectedTemplate.nodeTypes" 
                    :key="nodeType"
                    style="margin-right: 8px; margin-bottom: 8px;">
                    {{ nodeType }}
                </el-tag>
            </div>
            <div slot="footer" class="dialog-footer">
                <el-button @click="templateDetailVisible = false">å…³é—­</el-button>
                <el-button type="primary" @click="useTemplate(selectedTemplate)">ä½¿ç”¨æ­¤æ¨¡æ¿</el-button>
            </div>
        </el-dialog>


    </div>

    <!-- å¼•å…¥Vueå’ŒElement UI -->
    <script src="assets/vue.js"></script>
    <script src="assets/element-ui.js"></script>
    
    <script>
        // æ•°æ®å±‚ - å®šä¹‰æ‰€æœ‰æ•°æ®
        const data = {
            // é¡µé¢ä¿¡æ¯
            pageTitle: 'å·¥å‚æ¨¡å‹æ¨¡æ¿',
            pageDescription: 'é€‰æ‹©é¢„å®šä¹‰çš„å·¥å‚æ¨¡å‹æ¨¡æ¿ï¼Œå¿«é€Ÿæ„å»ºä¼ä¸šçº§ç»„ç»‡ç»“æ„',
            
            // æ¨¡æ¿æ•°æ®
            templates: [
                {
                    id: 'standard_manufacturing',
                    name: 'æ ‡å‡†åˆ¶é€ å·¥å‚',
                    subtitle: 'é€‚ç”¨äºä¼ ç»Ÿåˆ¶é€ ä¼ä¸š',
                    description: 'åŸºäº"å·¥å‚-è½¦é—´-äº§çº¿-å·¥æ®µ-è®¾å¤‡"çš„æ ‡å‡†å±‚çº§ç»“æ„ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åˆ¶é€ ä¼ä¸šã€‚',
                    category: 'standard',
                    status: 'published',
                    createTime: '2024-01-15',
                    structure: `å·¥å‚<br>
â”œâ”€â”€ è½¦é—´<br>
â”‚   â”œâ”€â”€ äº§çº¿<br>
â”‚   â”‚   â”œâ”€â”€ å·¥æ®µ<br>
â”‚   â”‚   â””â”€â”€ è®¾å¤‡<br>
â”‚   â””â”€â”€ è®¾å¤‡<br>
â””â”€â”€ èƒ½è€—åŒºåŸŸ<br>
    â””â”€â”€ è®¾å¤‡`,
                    nodeTypes: ['å·¥å‚', 'è½¦é—´', 'äº§çº¿', 'å·¥æ®µ', 'è®¾å¤‡', 'èƒ½è€—åŒºåŸŸ'],
                    instanceCount: 5, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 2 // æ–°å¢å¤åˆ¶æ•°é‡
                },
                {
                    id: 'cement_plant_standard',
                    name: 'æ°´æ³¥å·¥å‚æ ‡å‡†æ¨¡æ¿',
                    subtitle: 'é€‚ç”¨äºæ°´æ³¥ç”Ÿäº§ä¼ä¸š',
                    description: 'é’ˆå¯¹æ°´æ³¥è¡Œä¸šç‰¹ç‚¹ï¼ŒåŒ…å«åŸæ–™å¤„ç†ã€çƒ§æˆã€ç²‰ç£¨ç­‰æ ¸å¿ƒå·¥è‰ºç¯èŠ‚ã€‚',
                    category: 'standard',
                    status: 'published',
                    createTime: '2024-01-20',
                    structure: `æ°´æ³¥å·¥å‚<br>
â”œâ”€â”€ åŸæ–™å¤„ç†è½¦é—´<br>
â”‚   â”œâ”€â”€ ç ´ç¢å·¥æ®µ<br>
â”‚   â”‚   â”œâ”€â”€ ç ´ç¢æœº<br>
â”‚   â”‚   â””â”€â”€ è¾“é€è®¾å¤‡<br>
â”‚   â”œâ”€â”€ é¢„å‡åŒ–å·¥æ®µ<br>
â”‚   â”‚   â”œâ”€â”€ å †æ–™æœº<br>
â”‚   â”‚   â””â”€â”€ å–æ–™æœº<br>
â”‚   â””â”€â”€ ç²‰ç£¨å·¥æ®µ<br>
â”‚       â”œâ”€â”€ ç”Ÿæ–™ç£¨<br>
â”‚       â””â”€â”€ è¾“é€ç³»ç»Ÿ<br>
â”œâ”€â”€ çƒ§æˆè½¦é—´<br>
â”‚   â”œâ”€â”€ é¢„çƒ­å™¨<br>
â”‚   â”œâ”€â”€ å›è½¬çª‘<br>
â”‚   â”œâ”€â”€ å†·å´æœº<br>
â”‚   â””â”€â”€ åºŸæ°”å¤„ç†<br>
â”œâ”€â”€ ç²‰ç£¨è½¦é—´<br>
â”‚   â”œâ”€â”€ æ°´æ³¥ç£¨<br>
â”‚   â”œâ”€â”€ é€‰ç²‰æœº<br>
â”‚   â””â”€â”€ åŒ…è£…ç³»ç»Ÿ<br>
â””â”€â”€ è¾…åŠ©è®¾æ–½<br>
    â”œâ”€â”€ ç”µåŠ›ç³»ç»Ÿ<br>
    â”œâ”€â”€ æ°´å¤„ç†ç³»ç»Ÿ<br>
    â””â”€â”€ ç¯ä¿è®¾æ–½`,
                    nodeTypes: ['æ°´æ³¥å·¥å‚', 'åŸæ–™å¤„ç†è½¦é—´', 'çƒ§æˆè½¦é—´', 'ç²‰ç£¨è½¦é—´', 'è¾…åŠ©è®¾æ–½', 'ç ´ç¢å·¥æ®µ', 'é¢„å‡åŒ–å·¥æ®µ', 'ç²‰ç£¨å·¥æ®µ', 'é¢„çƒ­å™¨', 'å›è½¬çª‘', 'å†·å´æœº', 'æ°´æ³¥ç£¨', 'é€‰ç²‰æœº', 'åŒ…è£…ç³»ç»Ÿ', 'ç”µåŠ›ç³»ç»Ÿ', 'æ°´å¤„ç†ç³»ç»Ÿ', 'ç¯ä¿è®¾æ–½'],
                    instanceCount: 10, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 3 // æ–°å¢å¤åˆ¶æ•°é‡
                },
                {
                    id: 'cement_plant_advanced',
                    name: 'æ°´æ³¥å·¥å‚é«˜çº§æ¨¡æ¿',
                    subtitle: 'é€‚ç”¨äºå¤§å‹æ°´æ³¥ä¼ä¸š',
                    description: 'åŒ…å«å®Œæ•´çš„ç”Ÿäº§çº¿ç®¡ç†ï¼Œæ¶µç›–åŸæ–™ã€çƒ§æˆã€ç²‰ç£¨ã€åŒ…è£…ã€ç‰©æµç­‰å…¨æµç¨‹ã€‚',
                    category: 'standard',
                    status: 'published',
                    createTime: '2024-01-25',
                    structure: `æ°´æ³¥å·¥å‚<br>
â”œâ”€â”€ åŸæ–™å¤„ç†ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ çŸ³ç°çŸ³ç ´ç¢<br>
â”‚   â”œâ”€â”€ ç²˜åœŸå¤„ç†<br>
â”‚   â”œâ”€â”€ é“ç²‰å¤„ç†<br>
â”‚   â””â”€â”€ åŸæ–™é…æ–™<br>
â”œâ”€â”€ ç”Ÿæ–™åˆ¶å¤‡ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ ç”Ÿæ–™ç£¨<br>
â”‚   â”œâ”€â”€ ç”Ÿæ–™å‡åŒ–åº“<br>
â”‚   â””â”€â”€ ç”Ÿæ–™è¾“é€<br>
â”œâ”€â”€ çƒ§æˆç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ é¢„çƒ­å™¨ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ åˆ†è§£ç‚‰<br>
â”‚   â”œâ”€â”€ å›è½¬çª‘<br>
â”‚   â”œâ”€â”€ ç¯¦å†·æœº<br>
â”‚   â””â”€â”€ åºŸæ°”å¤„ç†<br>
â”œâ”€â”€ æ°´æ³¥ç²‰ç£¨ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ ç†Ÿæ–™åº“<br>
â”‚   â”œâ”€â”€ æ°´æ³¥ç£¨<br>
â”‚   â”œâ”€â”€ é€‰ç²‰æœº<br>
â”‚   â””â”€â”€ æ°´æ³¥åº“<br>
â”œâ”€â”€ åŒ…è£…å‘è¿ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ åŒ…è£…æœº<br>
â”‚   â”œâ”€â”€ æ•£è£…ç³»ç»Ÿ<br>
â”‚   â””â”€â”€ å‘è¿è®¾æ–½<br>
â””â”€â”€ è¾…åŠ©ç³»ç»Ÿ<br>
    â”œâ”€â”€ ç”µåŠ›ç³»ç»Ÿ<br>
    â”œâ”€â”€ æ°´å¤„ç†ç³»ç»Ÿ<br>
    â”œâ”€â”€ å‹ç¼©ç©ºæ°”ç³»ç»Ÿ<br>
    â”œâ”€â”€ ç¯ä¿è®¾æ–½<br>
    â””â”€â”€ å®éªŒå®¤`,
                    nodeTypes: ['æ°´æ³¥å·¥å‚', 'åŸæ–™å¤„ç†ç³»ç»Ÿ', 'ç”Ÿæ–™åˆ¶å¤‡ç³»ç»Ÿ', 'çƒ§æˆç³»ç»Ÿ', 'æ°´æ³¥ç²‰ç£¨ç³»ç»Ÿ', 'åŒ…è£…å‘è¿ç³»ç»Ÿ', 'è¾…åŠ©ç³»ç»Ÿ', 'çŸ³ç°çŸ³ç ´ç¢', 'ç²˜åœŸå¤„ç†', 'é“ç²‰å¤„ç†', 'åŸæ–™é…æ–™', 'ç”Ÿæ–™ç£¨', 'ç”Ÿæ–™å‡åŒ–åº“', 'é¢„çƒ­å™¨ç³»ç»Ÿ', 'åˆ†è§£ç‚‰', 'å›è½¬çª‘', 'ç¯¦å†·æœº', 'ç†Ÿæ–™åº“', 'æ°´æ³¥ç£¨', 'é€‰ç²‰æœº', 'æ°´æ³¥åº“', 'åŒ…è£…æœº', 'æ•£è£…ç³»ç»Ÿ', 'ç”µåŠ›ç³»ç»Ÿ', 'æ°´å¤„ç†ç³»ç»Ÿ', 'å‹ç¼©ç©ºæ°”ç³»ç»Ÿ', 'ç¯ä¿è®¾æ–½', 'å®éªŒå®¤'],
                    instanceCount: 15, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 4 // æ–°å¢å¤åˆ¶æ•°é‡
                },
                {
                    id: 'cement_plant_mini',
                    name: 'å°å‹æ°´æ³¥å·¥å‚',
                    subtitle: 'é€‚ç”¨äºå°å‹æ°´æ³¥ä¼ä¸š',
                    description: 'ç®€åŒ–çš„æ°´æ³¥ç”Ÿäº§æµç¨‹ï¼Œé€‚åˆäº§èƒ½è¾ƒå°çš„æ°´æ³¥ç”Ÿäº§ä¼ä¸šã€‚',
                    category: 'standard',
                    status: 'unpublished',
                    createTime: '2024-02-01',
                    structure: `æ°´æ³¥å·¥å‚<br>
â”œâ”€â”€ åŸæ–™å¤„ç†<br>
â”‚   â”œâ”€â”€ ç ´ç¢è®¾å¤‡<br>
â”‚   â””â”€â”€ é…æ–™ç³»ç»Ÿ<br>
â”œâ”€â”€ çƒ§æˆç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ å›è½¬çª‘<br>
â”‚   â””â”€â”€ å†·å´è®¾å¤‡<br>
â”œâ”€â”€ ç²‰ç£¨ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ æ°´æ³¥ç£¨<br>
â”‚   â””â”€â”€ åŒ…è£…è®¾å¤‡<br>
â””â”€â”€ è¾…åŠ©è®¾æ–½<br>
    â”œâ”€â”€ ç”µåŠ›è®¾å¤‡<br>
    â””â”€â”€ ç¯ä¿è®¾å¤‡`,
                    nodeTypes: ['æ°´æ³¥å·¥å‚', 'åŸæ–™å¤„ç†', 'çƒ§æˆç³»ç»Ÿ', 'ç²‰ç£¨ç³»ç»Ÿ', 'è¾…åŠ©è®¾æ–½', 'ç ´ç¢è®¾å¤‡', 'é…æ–™ç³»ç»Ÿ', 'å›è½¬çª‘', 'å†·å´è®¾å¤‡', 'æ°´æ³¥ç£¨', 'åŒ…è£…è®¾å¤‡', 'ç”µåŠ›è®¾å¤‡', 'ç¯ä¿è®¾å¤‡'],
                    instanceCount: 5, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 1 // æ–°å¢å¤åˆ¶æ•°é‡
                },
                {
                    id: 'cement_plant_custom',
                    name: 'æ°´æ³¥å·¥å‚å®šåˆ¶æ¨¡æ¿',
                    subtitle: 'è‡ªå®šä¹‰æ¨¡æ¿',
                    description: 'å¯æ ¹æ®ä¼ä¸šå…·ä½“éœ€æ±‚å®šåˆ¶çš„æ°´æ³¥å·¥å‚æ¨¡å‹ï¼Œæ”¯æŒç‰¹æ®Šå·¥è‰ºå’Œè®¾å¤‡é…ç½®ã€‚',
                    category: 'custom',
                    status: 'unpublished',
                    createTime: '2024-02-05',
                    structure: `æ°´æ³¥å·¥å‚<br>
â”œâ”€â”€ åŸæ–™ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ çŸ³ç°çŸ³å¤„ç†<br>
â”‚   â”œâ”€â”€ è¾…åŠ©åŸæ–™å¤„ç†<br>
â”‚   â””â”€â”€ åŸæ–™é…æ–™<br>
â”œâ”€â”€ ç”Ÿæ–™ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ ç”Ÿæ–™ç£¨<br>
â”‚   â””â”€â”€ ç”Ÿæ–™å‡åŒ–<br>
â”œâ”€â”€ çƒ§æˆç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ é¢„çƒ­å™¨<br>
â”‚   â”œâ”€â”€ åˆ†è§£ç‚‰<br>
â”‚   â”œâ”€â”€ å›è½¬çª‘<br>
â”‚   â””â”€â”€ å†·å´æœº<br>
â”œâ”€â”€ ç²‰ç£¨ç³»ç»Ÿ<br>
â”‚   â”œâ”€â”€ æ°´æ³¥ç£¨<br>
â”‚   â””â”€â”€ æ°´æ³¥å‚¨å­˜<br>
â”œâ”€â”€ åŒ…è£…å‘è¿<br>
â”‚   â”œâ”€â”€ åŒ…è£…ç³»ç»Ÿ<br>
â”‚   â””â”€â”€ æ•£è£…ç³»ç»Ÿ<br>
â””â”€â”€ è¾…åŠ©ç³»ç»Ÿ<br>
    â”œâ”€â”€ ç”µåŠ›ç³»ç»Ÿ<br>
    â”œâ”€â”€ æ°´ç³»ç»Ÿ<br>
    â””â”€â”€ ç¯ä¿ç³»ç»Ÿ`,
                    nodeTypes: ['æ°´æ³¥å·¥å‚', 'åŸæ–™ç³»ç»Ÿ', 'ç”Ÿæ–™ç³»ç»Ÿ', 'çƒ§æˆç³»ç»Ÿ', 'ç²‰ç£¨ç³»ç»Ÿ', 'åŒ…è£…å‘è¿', 'è¾…åŠ©ç³»ç»Ÿ', 'çŸ³ç°çŸ³å¤„ç†', 'è¾…åŠ©åŸæ–™å¤„ç†', 'åŸæ–™é…æ–™', 'ç”Ÿæ–™ç£¨', 'ç”Ÿæ–™å‡åŒ–', 'é¢„çƒ­å™¨', 'åˆ†è§£ç‚‰', 'å›è½¬çª‘', 'å†·å´æœº', 'æ°´æ³¥ç£¨', 'æ°´æ³¥å‚¨å­˜', 'åŒ…è£…ç³»ç»Ÿ', 'æ•£è£…ç³»ç»Ÿ', 'ç”µåŠ›ç³»ç»Ÿ', 'æ°´ç³»ç»Ÿ', 'ç¯ä¿ç³»ç»Ÿ'],
                    instanceCount: 10, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 2 // æ–°å¢å¤åˆ¶æ•°é‡
                },
                {
                    id: 'chemical_plant',
                    name: 'åŒ–å·¥å·¥å‚',
                    subtitle: 'é€‚ç”¨äºåŒ–å·¥ä¼ä¸š',
                    description: 'é’ˆå¯¹åŒ–å·¥è¡Œä¸šç‰¹ç‚¹ï¼Œå¢åŠ äº†å®‰å…¨åŒºåŸŸã€ç¯ä¿åŒºåŸŸç­‰ç‰¹æ®ŠèŠ‚ç‚¹ç±»å‹ã€‚',
                    category: 'standard',
                    status: 'unpublished',
                    createTime: '2024-01-20',
                    structure: `å·¥å‚<br>
â”œâ”€â”€ ç”Ÿäº§åŒºåŸŸ<br>
â”‚   â”œâ”€â”€ è£…ç½®<br>
â”‚   â””â”€â”€ è®¾å¤‡<br>
â”œâ”€â”€ å®‰å…¨åŒºåŸŸ<br>
â””â”€â”€ ç¯ä¿åŒºåŸŸ`,
                    nodeTypes: ['å·¥å‚', 'ç”Ÿäº§åŒºåŸŸ', 'è£…ç½®', 'è®¾å¤‡', 'å®‰å…¨åŒºåŸŸ', 'ç¯ä¿åŒºåŸŸ'],
                    instanceCount: 8, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 1 // æ–°å¢å¤åˆ¶æ•°é‡
                },
                {
                    id: 'steel_plant',
                    name: 'é’¢é“å·¥å‚',
                    subtitle: 'é€‚ç”¨äºé’¢é“ä¼ä¸š',
                    description: 'é’ˆå¯¹é’¢é“è¡Œä¸šç‰¹ç‚¹ï¼ŒåŒ…å«é«˜ç‚‰ã€è½¬ç‚‰ã€è½§æœºç­‰ä¸“ä¸šè®¾å¤‡ç±»å‹ã€‚',
                    category: 'standard',
                    status: 'unpublished',
                    createTime: '2024-01-25',
                    structure: `å·¥å‚<br>
â”œâ”€â”€ ç‚¼é“è½¦é—´<br>
â”‚   â””â”€â”€ é«˜ç‚‰<br>
â”œâ”€â”€ ç‚¼é’¢è½¦é—´<br>
â”‚   â””â”€â”€ è½¬ç‚‰<br>
â””â”€â”€ è½§é’¢è½¦é—´<br>
    â””â”€â”€ è½§æœº`,
                    nodeTypes: ['å·¥å‚', 'ç‚¼é“è½¦é—´', 'ç‚¼é’¢è½¦é—´', 'è½§é’¢è½¦é—´', 'é«˜ç‚‰', 'è½¬ç‚‰', 'è½§æœº'],
                    instanceCount: 12, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 3 // æ–°å¢å¤åˆ¶æ•°é‡
                },
                {
                    id: 'new_energy',
                    name: 'æ–°èƒ½æºå·¥å‚',
                    subtitle: 'è‡ªå®šä¹‰æ¨¡æ¿',
                    description: 'é’ˆå¯¹æ–°èƒ½æºè¡Œä¸šç‰¹ç‚¹ï¼ŒåŒ…å«å…‰ä¼ã€é£ç”µç­‰ä¸“ä¸šè®¾å¤‡ç±»å‹ã€‚',
                    category: 'custom',
                    status: 'unpublished',
                    createTime: '2024-02-01',
                    structure: `å·¥å‚<br>
â”œâ”€â”€ å…‰ä¼åŒºåŸŸ<br>
â”‚   â””â”€â”€ å…‰ä¼æ¿<br>
â”œâ”€â”€ é£ç”µåŒºåŸŸ<br>
â”‚   â””â”€â”€ é£æœº<br>
â””â”€â”€ å‚¨èƒ½åŒºåŸŸ<br>
    â””â”€â”€ å‚¨èƒ½è®¾å¤‡`,
                    nodeTypes: ['å·¥å‚', 'å…‰ä¼åŒºåŸŸ', 'é£ç”µåŒºåŸŸ', 'å‚¨èƒ½åŒºåŸŸ', 'å…‰ä¼æ¿', 'é£æœº', 'å‚¨èƒ½è®¾å¤‡'],
                    instanceCount: 15, // æ–°å¢å®ä¾‹åŒ–æ•°é‡
                    copyCount: 4 // æ–°å¢å¤åˆ¶æ•°é‡
                }
            ],
            
            // å¯ç”¨èŠ‚ç‚¹ç±»å‹
            availableNodeTypes: [
                { value: 'æ°´æ³¥å·¥å‚', label: 'æ°´æ³¥å·¥å‚' },
                { value: 'åŸæ–™å¤„ç†è½¦é—´', label: 'åŸæ–™å¤„ç†è½¦é—´' },
                { value: 'çƒ§æˆè½¦é—´', label: 'çƒ§æˆè½¦é—´' },
                { value: 'ç²‰ç£¨è½¦é—´', label: 'ç²‰ç£¨è½¦é—´' },
                { value: 'åŒ…è£…è½¦é—´', label: 'åŒ…è£…è½¦é—´' },
                { value: 'è¾…åŠ©è®¾æ–½', label: 'è¾…åŠ©è®¾æ–½' },
                { value: 'ç ´ç¢å·¥æ®µ', label: 'ç ´ç¢å·¥æ®µ' },
                { value: 'é¢„å‡åŒ–å·¥æ®µ', label: 'é¢„å‡åŒ–å·¥æ®µ' },
                { value: 'ç²‰ç£¨å·¥æ®µ', label: 'ç²‰ç£¨å·¥æ®µ' },
                { value: 'é¢„çƒ­å™¨', label: 'é¢„çƒ­å™¨' },
                { value: 'å›è½¬çª‘', label: 'å›è½¬çª‘' },
                { value: 'å†·å´æœº', label: 'å†·å´æœº' },
                { value: 'æ°´æ³¥ç£¨', label: 'æ°´æ³¥ç£¨' },
                { value: 'é€‰ç²‰æœº', label: 'é€‰ç²‰æœº' },
                { value: 'åŒ…è£…æœº', label: 'åŒ…è£…æœº' },
                { value: 'ç”µåŠ›ç³»ç»Ÿ', label: 'ç”µåŠ›ç³»ç»Ÿ' },
                { value: 'æ°´å¤„ç†ç³»ç»Ÿ', label: 'æ°´å¤„ç†ç³»ç»Ÿ' },
                { value: 'ç¯ä¿è®¾æ–½', label: 'ç¯ä¿è®¾æ–½' },
                { value: 'åŸæ–™å¤„ç†ç³»ç»Ÿ', label: 'åŸæ–™å¤„ç†ç³»ç»Ÿ' },
                { value: 'ç”Ÿæ–™åˆ¶å¤‡ç³»ç»Ÿ', label: 'ç”Ÿæ–™åˆ¶å¤‡ç³»ç»Ÿ' },
                { value: 'çƒ§æˆç³»ç»Ÿ', label: 'çƒ§æˆç³»ç»Ÿ' },
                { value: 'æ°´æ³¥ç²‰ç£¨ç³»ç»Ÿ', label: 'æ°´æ³¥ç²‰ç£¨ç³»ç»Ÿ' },
                { value: 'åŒ…è£…å‘è¿ç³»ç»Ÿ', label: 'åŒ…è£…å‘è¿ç³»ç»Ÿ' },
                { value: 'è¾…åŠ©ç³»ç»Ÿ', label: 'è¾…åŠ©ç³»ç»Ÿ' },
                { value: 'çŸ³ç°çŸ³ç ´ç¢', label: 'çŸ³ç°çŸ³ç ´ç¢' },
                { value: 'ç²˜åœŸå¤„ç†', label: 'ç²˜åœŸå¤„ç†' },
                { value: 'é“ç²‰å¤„ç†', label: 'é“ç²‰å¤„ç†' },
                { value: 'åŸæ–™é…æ–™', label: 'åŸæ–™é…æ–™' },
                { value: 'ç”Ÿæ–™ç£¨', label: 'ç”Ÿæ–™ç£¨' },
                { value: 'ç”Ÿæ–™å‡åŒ–åº“', label: 'ç”Ÿæ–™å‡åŒ–åº“' },
                { value: 'ç”Ÿæ–™è¾“é€', label: 'ç”Ÿæ–™è¾“é€' },
                { value: 'é¢„çƒ­å™¨ç³»ç»Ÿ', label: 'é¢„çƒ­å™¨ç³»ç»Ÿ' },
                { value: 'åˆ†è§£ç‚‰', label: 'åˆ†è§£ç‚‰' },
                { value: 'ç¯¦å†·æœº', label: 'ç¯¦å†·æœº' },
                { value: 'åºŸæ°”å¤„ç†', label: 'åºŸæ°”å¤„ç†' },
                { value: 'ç†Ÿæ–™åº“', label: 'ç†Ÿæ–™åº“' },
                { value: 'æ°´æ³¥åº“', label: 'æ°´æ³¥åº“' },
                { value: 'æ•£è£…ç³»ç»Ÿ', label: 'æ•£è£…ç³»ç»Ÿ' },
                { value: 'å‘è¿è®¾æ–½', label: 'å‘è¿è®¾æ–½' },
                { value: 'å‹ç¼©ç©ºæ°”ç³»ç»Ÿ', label: 'å‹ç¼©ç©ºæ°”ç³»ç»Ÿ' },
                { value: 'å®éªŒå®¤', label: 'å®éªŒå®¤' },
                { value: 'åŸæ–™ç³»ç»Ÿ', label: 'åŸæ–™ç³»ç»Ÿ' },
                { value: 'ç”Ÿæ–™ç³»ç»Ÿ', label: 'ç”Ÿæ–™ç³»ç»Ÿ' },
                { value: 'ç²‰ç£¨ç³»ç»Ÿ', label: 'ç²‰ç£¨ç³»ç»Ÿ' },
                { value: 'åŒ…è£…å‘è¿', label: 'åŒ…è£…å‘è¿' },
                { value: 'çŸ³ç°çŸ³å¤„ç†', label: 'çŸ³ç°çŸ³å¤„ç†' },
                { value: 'è¾…åŠ©åŸæ–™å¤„ç†', label: 'è¾…åŠ©åŸæ–™å¤„ç†' },
                { value: 'ç”Ÿæ–™å‡åŒ–', label: 'ç”Ÿæ–™å‡åŒ–' },
                { value: 'æ°´æ³¥å‚¨å­˜', label: 'æ°´æ³¥å‚¨å­˜' },
                { value: 'æ°´ç³»ç»Ÿ', label: 'æ°´ç³»ç»Ÿ' },
                { value: 'ç¯ä¿ç³»ç»Ÿ', label: 'ç¯ä¿ç³»ç»Ÿ' }
            ],
            
            // çŠ¶æ€æ•°æ®
            searchKeyword: '',
            selectedCategory: 'all',
            selectedStatus: 'all',
            templateDetailVisible: false,
            selectedTemplate: null,
            // åˆ›å»ºæ¨¡å‹å¯¹è¯æ¡†
            createDialogVisible: false,
            createForm: {
                orgId: '',
                orgName: '',
                orgType: '',
                template: '', // å­˜æ”¾æ¨¡æ¿ID
                templateName: '' // ä»…ç”¨äºå±•ç¤º
            },
            // ç»„ç»‡æ ‘ï¼ˆç¤ºä¾‹ï¼‰
            orgTree: [
                {
                    id: 'group-1', name: 'åä¸œé›†å›¢', type: 'é›†å›¢', children: [
                        { id: 'company-1', name: 'ä¸Šæµ·å…¬å¸', type: 'å…¬å¸', children: [
                            { id: 'factory-101', name: 'ä¸Šæµ·ä¸€å‚', type: 'å·¥å‚' },
                            { id: 'factory-102', name: 'ä¸Šæµ·äºŒå‚', type: 'å·¥å‚' }
                        ]},
                        { id: 'company-2', name: 'æ­å·å…¬å¸', type: 'å…¬å¸', children: [
                            { id: 'factory-201', name: 'æ­å·ä¸€å‚', type: 'å·¥å‚' }
                        ]}
                    ]
                },
                {
                    id: 'group-2', name: 'åå—é›†å›¢', type: 'é›†å›¢', children: [
                        { id: 'company-3', name: 'å¹¿å·å…¬å¸', type: 'å…¬å¸', children: [
                            { id: 'factory-301', name: 'å¹¿å·ä¸€å‚', type: 'å·¥å‚' }
                        ]}
                    ]
                }
            ],
            orgTreeProps: { label: 'name', children: 'children' }
        };

        // é€»è¾‘å±‚ - Vueå®ä¾‹
        new Vue({
            el: '#app',
            data: data,
            computed: {
                // è®¡ç®—å±æ€§
                filteredTemplates() {
                    return this.templates.filter(template => {
                        // æœç´¢è¿‡æ»¤
                        const searchMatch = !this.searchKeyword || 
                            template.name.toLowerCase().includes(this.searchKeyword.toLowerCase()) ||
                            template.description.toLowerCase().includes(this.searchKeyword.toLowerCase());
                        
                        // åˆ†ç±»è¿‡æ»¤
                        const categoryMatch = this.selectedCategory === 'all' || 
                            template.category === this.selectedCategory;
                        
                        // çŠ¶æ€è¿‡æ»¤
                        const statusMatch = this.selectedStatus === 'all' || 
                            template.status === this.selectedStatus;
                        
                        return searchMatch && categoryMatch && statusMatch;
                    });
                },
                
                totalTemplates() {
                    return this.templates.length;
                },
                
                standardTemplates() {
                    return this.templates.filter(t => t.category === 'standard').length;
                },
                
                customTemplates() {
                    return this.templates.filter(t => t.category === 'custom').length;
                },
                
                publishedTemplates() {
                    return this.templates.filter(t => t.status === 'published').length;
                }
            },
            methods: {
                // ç»„ç»‡å›¾æ ‡
                getOrgIcon(type) {
                    switch (type) {
                        case 'é›†å›¢': return 'el-icon-office-building';
                        case 'å…¬å¸': return 'el-icon-s-home';
                        case 'å·¥å‚': return 'el-icon-s-platform';
                        default: return 'el-icon-s-order';
                    }
                },
                // é€‰æ‹©ç»„ç»‡èŠ‚ç‚¹ï¼ˆä»…å…è®¸å·¥å‚ï¼‰
                onOrgNodeClick(node) {
                    if (node.type !== 'å·¥å‚') {
                        this.$message.warning('åªèƒ½é€‰æ‹©â€œå·¥å‚â€ç±»å‹çš„èŠ‚ç‚¹');
                        return;
                    }
                    this.createForm.orgId = node.id;
                    this.createForm.orgName = node.name;
                    this.createForm.orgType = node.type;
                    if (this.$refs.orgTreePopover && this.$refs.orgTreePopover.doClose) {
                        this.$refs.orgTreePopover.doClose();
                    }
                },
                // è·å–æ ‡ç­¾æ ·å¼ç±»
                getTagClass(category) {
                    return category === 'standard' ? 'tag-standard' : 'tag-custom';
                },
                
                // æŸ¥çœ‹æ¨¡æ¿è¯¦æƒ…
                viewTemplate(template) {
                    this.selectedTemplate = template;
                    this.templateDetailVisible = true;
                },
                
                // ä½¿ç”¨æ¨¡æ¿
                useTemplate(template) {
                    this.$confirm(`ç¡®å®šè¦ä½¿ç”¨æ¨¡æ¿"${template.name}"å—ï¼Ÿè¿™å°†åˆ›å»ºæ–°çš„å·¥å‚æ¨¡å‹ã€‚`, 'æç¤º', {
                        confirmButtonText: 'ç¡®å®š',
                        cancelButtonText: 'å–æ¶ˆ',
                        type: 'info'
                    }).then(() => {
                        // å¢åŠ å®ä¾‹åŒ–æ•°é‡
                        if (!template.instanceCount) {
                            template.instanceCount = 0;
                        }
                        template.instanceCount++;
                        
                        this.$message.success(`å·²ä½¿ç”¨æ¨¡æ¿: ${template.name}`);
                        // è·³è½¬åˆ°å·¥å‚æ¨¡å‹ç®¡ç†é¡µé¢
                        window.location.href = 'factory-model-management.html?template=' + template.id + '&action=create';
                    }).catch(() => {
                        this.$message.info('å·²å–æ¶ˆä½¿ç”¨æ¨¡æ¿');
                    });
                },
                
                // ç¼–è¾‘æ¨¡æ¿
                editTemplate(template) {
                    if (template.category === 'standard') {
                        this.$message.warning('æ ‡å‡†æ¨¡æ¿ä¸å…è®¸ç¼–è¾‘');
                        return;
                    }
                    // è·³è½¬åˆ°æ¨¡æ¿ç®¡ç†é¡µé¢
                    window.location.href = 'factory-model-template-management.html?id=' + template.id;
                },
                
                // åˆ é™¤æ¨¡æ¿
                deleteTemplate(template) {
                    this.$confirm(`ç¡®å®šè¦åˆ é™¤æ¨¡æ¿"${template.name}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`, 'è­¦å‘Š', {
                        confirmButtonText: 'ç¡®å®š',
                        cancelButtonText: 'å–æ¶ˆ',
                        type: 'warning'
                    }).then(() => {
                        const index = this.templates.findIndex(t => t.id === template.id);
                        if (index > -1) {
                            this.templates.splice(index, 1);
                            this.$message.success('åˆ é™¤æˆåŠŸ');
                        }
                    }).catch(() => {
                        this.$message.info('å·²å–æ¶ˆåˆ é™¤');
                    });
                },
                
                // åˆ›å»ºè‡ªå®šä¹‰æ¨¡æ¿
                createCustomTemplate() {
                    // è·³è½¬åˆ°æ¨¡æ¿ç®¡ç†é¡µé¢ï¼Œåˆ›å»ºæ–°æ¨¡æ¿
                    window.location.href = 'factory-model-template-management.html?action=create';
                },
                


                // è®¡ç®—æ¨¡æ¿çš„èŠ‚ç‚¹æ•°
                getNodeCount(template) {
                    return template.nodeTypes ? template.nodeTypes.length : 0;
                },

                // æ‰“å¼€å·¥å‚æ¨¡å‹ç®¡ç†é¡µé¢
                openFactoryModel(template) {
                    // è·³è½¬åˆ°æ¨¡æ¿ç®¡ç†é¡µé¢
                    window.location.href = 'factory-model-template-management.html?id=' + template.id;
                },
                
                // åˆ›å»ºå·¥å‚æ¨¡å‹
                createFactoryModel(template) {
                    if (template.status !== 'published') {
                        this.$message.warning('åªæœ‰å·²å‘å¸ƒçš„æ¨¡æ¿æ‰èƒ½åˆ›å»ºå·¥å‚æ¨¡å‹ã€‚');
                        return;
                    }
                    // æ‰“å¼€åˆ›å»ºå¯¹è¯æ¡†å¹¶é¢„å¡«æ¨¡æ¿
                    this.createDialogVisible = true;
                    this.createForm.orgId = '';
                    this.createForm.orgName = '';
                    this.createForm.orgType = '';
                    this.createForm.template = template.id;
                    this.createForm.templateName = template.name;
                },
                // å…³é—­åˆ›å»ºå¯¹è¯æ¡†
                closeCreateDialog() {
                    this.createDialogVisible = false;
                },
                // ç¡®è®¤åˆ›å»º
                confirmCreateModel() {
                    if (!this.createForm.orgId || this.createForm.orgType !== 'å·¥å‚') {
                        this.$message.warning('è¯·é€‰æ‹©æ‰€å±ç»„ç»‡ï¼ˆå·¥å‚ï¼‰');
                        return;
                    }
                    if (!this.createForm.template) {
                        this.$message.warning('æ¨¡æ¿ä¿¡æ¯ç¼ºå¤±');
                        return;
                    }
                    const orgId = encodeURIComponent(this.createForm.orgId);
                    const orgName = encodeURIComponent(this.createForm.orgName);
                    const template = encodeURIComponent(this.createForm.template);
                    this.createDialogVisible = false;
                    window.location.href = `factory-model-management.html?action=create&orgId=${orgId}&orgName=${orgName}&template=${template}`;
                },

                // å¤åˆ¶æ¨¡æ¿
                copyTemplate(template) {
                    this.$confirm(`ç¡®å®šè¦å¤åˆ¶æ¨¡æ¿"${template.name}"å—ï¼Ÿè¿™å°†åˆ›å»ºä¸€ä¸ªæ–°çš„è‡ªå®šä¹‰æ¨¡æ¿ã€‚`, 'æç¤º', {
                        confirmButtonText: 'ç¡®å®š',
                        cancelButtonText: 'å–æ¶ˆ',
                        type: 'info'
                    }).then(() => {
                        // æ ¹æ®æ¨¡æ¿IDç”Ÿæˆå¯¹åº”çš„å±‚çº§ç»“æ„æ•°æ®
                        const hierarchyNodes = this.generateHierarchyNodes(template.id);
                        
                        // è·³è½¬åˆ°æ¨¡æ¿ç®¡ç†é¡µé¢ï¼Œä¼ é€’å¤åˆ¶æ¨¡æ¿çš„æ•°æ®
                        const copyData = {
                            id: 'template_copy_' + Date.now(),
                            name: `${template.name} (å‰¯æœ¬)`,
                            subtitle: template.subtitle,
                            description: template.description,
                            category: 'custom', // å¤åˆ¶åè‡ªåŠ¨è®¾ç½®ä¸ºè‡ªå®šä¹‰æ¨¡æ¿
                            status: 'unpublished',
                            createTime: new Date().toLocaleDateString(),
                            structure: template.structure,
                            nodeTypes: [...template.nodeTypes], // å¤åˆ¶èŠ‚ç‚¹ç±»å‹
                            hierarchyNodes: hierarchyNodes, // æ·»åŠ å±‚çº§ç»“æ„æ•°æ®
                            instanceCount: 0,
                            copyCount: 0
                        };
                        
                        // å°†å¤åˆ¶æ•°æ®ç¼–ç åä¼ é€’åˆ°URL
                        const encodedData = encodeURIComponent(JSON.stringify(copyData));
                        window.location.href = `factory-model-template-management.html?action=copy&data=${encodedData}`;
                    }).catch(() => {
                        this.$message.info('å·²å–æ¶ˆå¤åˆ¶æ¨¡æ¿');
                    });
                },
                
                // æ ¹æ®æ¨¡æ¿IDç”Ÿæˆå±‚çº§ç»“æ„æ•°æ®
                generateHierarchyNodes(templateId) {
                    const hierarchyMap = {
                        'cement_plant_standard': [
                            {
                                id: '1',
                                name: 'æ°´æ³¥å·¥å‚',
                                type: 'å·¥å‚',
                                description: 'æ°´æ³¥ç”Ÿäº§å·¥å‚',
                                level: 1,
                                parentId: null
                            },
                            {
                                id: '2',
                                name: 'åŸæ–™å¤„ç†è½¦é—´',
                                type: 'è½¦é—´',
                                description: 'å¤„ç†çŸ³ç°çŸ³ã€ç²˜åœŸç­‰åŸæ–™',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '3',
                                name: 'ç ´ç¢å·¥æ®µ',
                                type: 'å·¥æ®µ',
                                description: 'ç ´ç¢çŸ³ç°çŸ³ç­‰åŸæ–™',
                                level: 3,
                                parentId: '2'
                            },
                            {
                                id: '4',
                                name: 'ç ´ç¢æœº',
                                type: 'è®¾å¤‡',
                                description: 'ç ´ç¢è®¾å¤‡',
                                level: 4,
                                parentId: '3'
                            },
                            {
                                id: '5',
                                name: 'çƒ§æˆè½¦é—´',
                                type: 'è½¦é—´',
                                description: 'æ°´æ³¥ç†Ÿæ–™çƒ§æˆ',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '6',
                                name: 'å›è½¬çª‘',
                                type: 'è®¾å¤‡',
                                description: 'æ°´æ³¥ç†Ÿæ–™çƒ§æˆè®¾å¤‡',
                                level: 3,
                                parentId: '5'
                            }
                        ],
                        'cement_plant_advanced': [
                            {
                                id: '1',
                                name: 'æ°´æ³¥å·¥å‚',
                                type: 'å·¥å‚',
                                description: 'å¤§å‹æ°´æ³¥ç”Ÿäº§ä¼ä¸š',
                                level: 1,
                                parentId: null
                            },
                            {
                                id: '2',
                                name: 'åŸæ–™å¤„ç†ç³»ç»Ÿ',
                                type: 'è½¦é—´',
                                description: 'åŸæ–™å¤„ç†å’Œç®¡ç†',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '3',
                                name: 'ç”Ÿæ–™åˆ¶å¤‡ç³»ç»Ÿ',
                                type: 'è½¦é—´',
                                description: 'ç”Ÿæ–™åˆ¶å¤‡å’Œå‡åŒ–',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '4',
                                name: 'çƒ§æˆç³»ç»Ÿ',
                                type: 'è½¦é—´',
                                description: 'ç†Ÿæ–™çƒ§æˆç³»ç»Ÿ',
                                level: 2,
                                parentId: '1'
                            }
                        ],
                        'cement_plant_mini': [ 
                            {
                                id: '1',
                                name: 'æ°´æ³¥å·¥å‚',
                                type: 'å·¥å‚',
                                description: 'å°å‹æ°´æ³¥å·¥å‚',
                                level: 1,
                                parentId: null
                            },
                            {
                                id: '2',
                                name: 'ç”Ÿäº§è½¦é—´',
                                type: 'è½¦é—´',
                                description: 'ç»¼åˆç”Ÿäº§è½¦é—´',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '3',
                                name: 'ä¸»è¦è®¾å¤‡',
                                type: 'è®¾å¤‡',
                                description: 'æ ¸å¿ƒç”Ÿäº§è®¾å¤‡',
                                level: 3,
                                parentId: '2'
                            }
                        ],
                        'cement_plant_custom': [
                            {
                                id: '1',
                                name: 'æ°´æ³¥å·¥å‚',
                                type: 'å·¥å‚',
                                description: 'ç”¨æˆ·è‡ªå®šä¹‰æ°´æ³¥å·¥å‚',
                                level: 1,
                                parentId: null
                            },
                            {
                                id: '2',
                                name: 'åŸæ–™ç³»ç»Ÿ',
                                type: 'è½¦é—´',
                                description: 'åŸæ–™å¤„ç†ç³»ç»Ÿ',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '3',
                                name: 'ç”Ÿæ–™ç³»ç»Ÿ',
                                type: 'è½¦é—´',
                                description: 'ç”Ÿæ–™åˆ¶å¤‡ç³»ç»Ÿ',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '4',
                                name: 'çƒ§æˆç³»ç»Ÿ',
                                type: 'è½¦é—´',
                                description: 'ç†Ÿæ–™çƒ§æˆç³»ç»Ÿ',
                                level: 2,
                                parentId: '1'
                            }
                        ],
                        'chemical_plant': [
                            {
                                id: '1',
                                name: 'åŒ–å·¥å·¥å‚',
                                type: 'å·¥å‚',
                                description: 'åŒ–å·¥ç”Ÿäº§ä¼ä¸š',
                                level: 1,
                                parentId: null
                            },
                            {
                                id: '2',
                                name: 'ç”Ÿäº§åŒºåŸŸ',
                                type: 'è½¦é—´',
                                description: 'ä¸»è¦ç”Ÿäº§åŒºåŸŸ',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '3',
                                name: 'å®‰å…¨åŒºåŸŸ',
                                type: 'è½¦é—´',
                                description: 'å®‰å…¨æ§åˆ¶åŒºåŸŸ',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '4',
                                name: 'ç¯ä¿åŒºåŸŸ',
                                type: 'è½¦é—´',
                                description: 'ç¯ä¿å¤„ç†åŒºåŸŸ',
                                level: 2,
                                parentId: '1'
                            }
                        ],
                        'steel_plant': [
                            {
                                id: '1',
                                name: 'é’¢é“å·¥å‚',
                                type: 'å·¥å‚',
                                description: 'é’¢é“ç”Ÿäº§ä¼ä¸š',
                                level: 1,
                                parentId: null
                            },
                            {
                                id: '2',
                                name: 'ç‚¼é“è½¦é—´',
                                type: 'è½¦é—´',
                                description: 'ç‚¼é“ç”Ÿäº§è½¦é—´',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '3',
                                name: 'ç‚¼é’¢è½¦é—´',
                                type: 'è½¦é—´',
                                description: 'ç‚¼é’¢ç”Ÿäº§è½¦é—´',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '4',
                                name: 'è½§é’¢è½¦é—´',
                                type: 'è½¦é—´',
                                description: 'è½§é’¢ç”Ÿäº§è½¦é—´',
                                level: 2,
                                parentId: '1'
                            }
                        ],
                        'standard_manufacturing': [
                            {
                                id: '1',
                                name: 'æ ‡å‡†åˆ¶é€ å·¥å‚',
                                type: 'å·¥å‚',
                                description: 'æ ‡å‡†åˆ¶é€ ä¼ä¸š',
                                level: 1,
                                parentId: null
                            },
                            {
                                id: '2',
                                name: 'ç”Ÿäº§è½¦é—´',
                                type: 'è½¦é—´',
                                description: 'ä¸»è¦ç”Ÿäº§è½¦é—´',
                                level: 2,
                                parentId: '1'
                            },
                            {
                                id: '3',
                                name: 'è®¾å¤‡åŒºåŸŸ',
                                type: 'è½¦é—´',
                                description: 'è®¾å¤‡ç®¡ç†åŒºåŸŸ',
                                level: 2,
                                parentId: '1'
                            }
                        ]
                    };
                    
                    return hierarchyMap[templateId] || [];
                }
            },
            mounted() {
                // ç»„ä»¶æŒ‚è½½åçš„åˆå§‹åŒ–
                console.log('å·¥å‚æ¨¡å‹æ¨¡æ¿é¡µé¢å·²åŠ è½½');
                
                // æ£€æŸ¥å­—ä½“åŠ è½½çŠ¶æ€
                document.fonts.ready.then(() => {
                    console.log('å­—ä½“åŠ è½½å®Œæˆ');
                    if (document.fonts.check('1em element-icons')) {
                        console.log('Element UI å›¾æ ‡å­—ä½“åŠ è½½æˆåŠŸ');
                    } else {
                        console.warn('Element UI å›¾æ ‡å­—ä½“åŠ è½½å¤±è´¥');
                    }
                });
                
                // ç›‘å¬å­—ä½“åŠ è½½äº‹ä»¶
                document.fonts.addEventListener('loadingdone', (event) => {
                    console.log('å­—ä½“åŠ è½½äº‹ä»¶:', event);
                });
            }
        });
    </script>
</body>
</html> 