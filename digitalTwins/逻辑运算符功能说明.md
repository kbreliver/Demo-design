# 数据绑定配置 - 逻辑运算符功能说明

## 功能概述

在工厂模型管理页面的数据绑定配置抽屉中，我们新增了完整的逻辑运算符支持，包括算术运算符、逻辑运算符和条件运算符，使用户能够构建更复杂的数据计算公式。

## 新增功能

### 1. 运算符分类

#### 算术运算符
- `+` 加法
- `-` 减法  
- `*` 乘法
- `/` 除法
- `(` `)` 圆括号
- `=` 等于
- `%` 取模
- `**` 幂运算

#### 逻辑运算符
- `and` 逻辑与
- `or` 逻辑或
- `!` 逻辑非
- `==` 等于
- `!=` 不等于
- `>` 大于
- `<` 小于
- `>=` 大于等于
- `<=` 小于等于

#### 条件运算符
- `if` 条件判断
- `then` 条件成立时执行
- `else` 条件不成立时执行

### 2. 界面改进

#### 运算符分组显示
- 将运算符按类型分组显示，提高可读性
- 不同运算符类型使用不同的颜色标识：
  - 算术运算符：绿色
  - 逻辑运算符：橙色
  - 条件运算符：蓝色

#### 公式示例功能
- 提供三种类型的公式示例：
  - 算术运算示例
  - 逻辑运算示例
  - 条件判断示例
- 一键插入示例公式，帮助用户理解使用方法

#### 公式验证功能
- 实时验证公式语法正确性
- 检查括号匹配
- 检查if-then-else结构完整性
- 提供详细的错误提示

### 3. 智能插入功能

#### 自动空格处理
- 逻辑运算符和条件运算符自动添加前后空格
- 数据点位插入时自动添加空格分隔
- 提高公式的可读性

#### 语法高亮
- 不同类型的运算符使用不同颜色
- 数据点位使用特殊格式显示

## 使用示例

### 算术运算
```
[RTU].[温度传感器1] + [RTU].[温度传感器2] / 2
```

### 逻辑运算
```
[RTU].[温度传感器1] > 50 and [RTU].[压力传感器1] < 100
```

### 条件判断
```
if [RTU].[温度传感器1] > 80 then [RTU].[温度传感器1] * 1.2 else [RTU].[温度传感器1]
```

## 技术实现

### 文件修改
- `factory-model-management.html`：主要功能实现
- `test-data-binding.html`：功能测试页面

### 核心方法
- `insertOperator(operator)`：插入运算符
- `insertExample(type)`：插入公式示例
- `validateFormula()`：验证公式语法
- `insertDataPoint(point)`：插入数据点位

### CSS样式
- 运算符分组样式
- 不同类型运算符的颜色主题
- 响应式布局适配

## 测试验证

可以通过访问 `test-data-binding.html` 页面来测试所有新增功能：

1. 运算符分类展示
2. 公式编辑功能
3. 公式示例插入
4. 语法验证功能
5. 实时结果显示

## 兼容性

- 保持与现有功能的完全兼容
- 支持原有的算术运算符
- 向后兼容现有的数据绑定配置

## 后续优化建议

1. 添加更多数学函数支持（如sin、cos、log等）
2. 实现公式语法高亮显示
3. 添加公式模板库功能
4. 支持公式的导入导出功能
5. 添加公式执行结果预览功能 