<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[P1] 资产类型管理 - 数字孪生平台</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .tab-content { border: 1px solid #dee2e6; border-top: none; border-radius: 0 0 0.375rem 0.375rem; padding: 1.5rem; }
        .form-section { margin-bottom: 2rem; padding-bottom: 1rem; border-bottom: 1px dashed #e9ecef; }
        .form-section:last-child { border-bottom: none; }
        .card-header-action { cursor: pointer; transition: color 0.2s; }
        .card-header-action:hover { color: #0d6efd; }
        .rule-item { transition: transform 0.2s, box-shadow 0.2s; }
        .rule-item:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .draggable-handle { cursor: move; color: #6c757d; }
        .draggable-handle:hover { color: #0d6efd; }
        .template-card { height: 100%; transition: transform 0.2s, box-shadow 0.2s; }
        .template-card:hover { transform: translateY(-3px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
                .step-item .step-number {
                    transition: all 0.3s ease;
                }
                .step-item.active .step-number {
                    background-color: #0d6efd !important;
                    transform: scale(1.1);
                }
                .step-item {
                    transition: all 0.2s ease;
                    border-left: 3px solid transparent;
                    margin-bottom: 0.5rem;
                }
                .step-item.active {
                    border-left-color: #0d6efd;
                    background-color: rgba(13, 110, 253, 0.05);
                }
                .step-item:hover:not(.active) {
                    background-color: rgba(0, 0, 0, 0.03);
                }
                .tab-content { border: none; padding: 0; }
                @media (max-width: 768px) {
                    .step-item {
                        font-size: 0.9rem;
                    }
                    .step-item h5 {
                        font-size: 1rem;
                    }
                }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-industry me-2"></i>数字孪生平台
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="asset-type-management.html"><i class="fas fa-cubes me-1"></i>资产类型管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fas fa-sitemap me-1"></i>工厂资产管理</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fas fa-chart-line me-1"></i>实时监控驾驶舱</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="fas fa-exclamation-triangle me-1"></i>异常告警与诊断</a>
                    </li>
                </ul>
                <div class="navbar-nav ms-auto">
                    <span class="nav-item nav-link"><i class="fas fa-user me-1"></i>模型管理员</span>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4 mb-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2><i class="fas fa-cube me-2"></i>[P1] 资产类型管理</h2>
                <p class="text-muted">定义资产的基础类型、属性模板和行为规则</p>
            </div>
            <div>
                <button class="btn btn-outline-secondary me-2" id="backBtn">
                    <i class="fas fa-arrow-left me-1"></i>返回列表
                </button>
                <button class="btn btn-outline-primary me-2" id="saveDraftBtn">
                    <i class="fas fa-save me-1"></i>保存草稿
                </button>
                <button class="btn btn-primary" id="publishBtn">
                    <i class="fas fa-check-circle me-1"></i>发布类型
                </button>
            </div>
        </div>

        <!-- 资产类型表单 -->
        <div class="card mb-4">
            <div class="card-body">
                <!-- 选项卡导航 -->
                <div class="row">
                    <!-- 纵向步骤导航 -->
                    <div class="col-md-3 mb-4">
                        <div class="list-group" id="stepNavigation">
                            <a href="#basic-info" class="list-group-item list-group-item-action active step-item" data-step="1">
                                <div class="d-flex align-items-center">
                                    <div class="step-number bg-primary text-white rounded-circle w-8 h-8 d-flex align-items-center justify-content-center me-3">1</div>
                                    <div>
                                        <h5 class="mb-0">P1.1 类型基本信息</h5>
                                        <p class="text-muted small mb-0">定义资产类型的基础信息和分类</p>
                                    </div>
                                </div>
                            </a>
                            <a href="#static-attributes" class="list-group-item list-group-item-action step-item" data-step="2">
                                <div class="d-flex align-items-center">
                                    <div class="step-number bg-secondary text-white rounded-circle w-8 h-8 d-flex align-items-center justify-content-center me-3">2</div>
                                    <div>
                                        <h5 class="mb-0">P1.2 静态属性定义</h5>
                                        <p class="text-muted small mb-0">设置资产的固有属性和特征</p>
                                    </div>
                                </div>
                            </a>
                            <a href="#dynamic-variables" class="list-group-item list-group-item-action step-item" data-step="3">
                                <div class="d-flex align-items-center">
                                    <div class="step-number bg-secondary text-white rounded-circle w-8 h-8 d-flex align-items-center justify-content-center me-3">3</div>
                                    <div>
                                        <h5 class="mb-0">P1.3 动态变量模板</h5>
                                        <p class="text-muted small mb-0">配置资产的动态监测变量</p>
                                    </div>
                                </div>
                            </a>
                            <a href="#data-rules" class="list-group-item list-group-item-action step-item" data-step="4">
                                <div class="d-flex align-items-center">
                                    <div class="step-number bg-secondary text-white rounded-circle w-8 h-8 d-flex align-items-center justify-content-center me-3">4</div>
                                    <div>
                                        <h5 class="mb-0">P1.4 数据加工规则</h5>
                                        <p class="text-muted small mb-0">定义数据处理和转换规则</p>
                                    </div>
                                </div>
                            </a>
                            <a href="#indicator-cards" class="list-group-item list-group-item-action step-item" data-step="5">
                                <div class="d-flex align-items-center">
                                    <div class="step-number bg-secondary text-white rounded-circle w-8 h-8 d-flex align-items-center justify-content-center me-3">5</div>
                                    <div>
                                        <h5 class="mb-0">P1.5 指标卡片模板</h5>
                                        <p class="text-muted small mb-0">设计资产监控指标的展示方式</p>
                                    </div>
                                </div>
                            </a>
                            <a href="#alarm-rules" class="list-group-item list-group-item-action step-item" data-step="6">
                                <div class="d-flex align-items-center">
                                    <div class="step-number bg-secondary text-white rounded-circle w-8 h-8 d-flex align-items-center justify-content-center me-3">6</div>
                                    <div>
                                        <h5 class="mb-0">P1.6 告警规则模板</h5>
                                        <p class="text-muted small mb-0">设置异常状态的告警条件</p>
                                    </div>
                                </div>
                            </a>
                            <a href="#model-templates" class="list-group-item list-group-item-action step-item" data-step="7">
                                <div class="d-flex align-items-center">
                                    <div class="step-number bg-secondary text-white rounded-circle w-8 h-8 d-flex align-items-center justify-content-center me-3">7</div>
                                    <div>
                                        <h5 class="mb-0">P1.7 几何/组态模型</h5>
                                        <p class="text-muted small mb-0">关联三维几何模型和组态信息</p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- 内容区域 -->
                    <div class="col-md-9">
                        <!-- 选项卡内容 -->
                        <div class="tab-content" id="assetTypeTabsContent">
                    <!-- P1.1 类型基本信息 -->
                    <div class="tab-pane fade show active" id="basic-info" role="tabpanel">
                        <div class="form-section">
                            <h5><i class="fas fa-info-circle me-2"></i>基本信息</h5>
                            <div class="row g-3 mt-3">
                                <div class="col-md-6">
                                    <label for="typeName" class="form-label">类型名称 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="typeName" placeholder="例如：回转窑、生料磨" required>
                                    <div class="form-text">资产类型的唯一标识名称，建议使用中文</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="typeCode" class="form-label">类型编码 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="typeCode" placeholder="例如：ROTARY_KILN、RAW_MILL" required>
                                    <div class="form-text">系统内部使用的唯一编码，建议使用大写字母和下划线</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="typeCategory" class="form-label">分类标签</label>
                                    <select class="form-select" id="typeCategory" multiple>
                                        <option value="equipment">生产设备</option>
                                        <option value="instrument">仪器仪表</option>
                                        <option value="pipeline">管道</option>
                                        <option value="structure">建构筑物</option>
                                        <option value="system">系统</option>
                                    </select>
                                    <div class="form-text">可选择多个分类标签，用于资产筛选</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="parentType" class="form-label">父类型</label>
                                    <select class="form-select" id="parentType">
                                        <option value="">-- 无父类型 --</option>
                                        <option value="equipment">通用设备</option>
                                        <option value="rotary">旋转设备</option>
                                        <option value="fixed">静置设备</option>
                                    </select>
                                    <div class="form-text">继承父类型的所有属性和规则</div>
                                </div>
                                <div class="col-12">
                                    <label for="typeDescription" class="form-label">类型描述</label>
                                    <textarea class="form-control" id="typeDescription" rows="3" placeholder="描述该资产类型的功能、用途和特性"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h5><i class="fas fa-cog me-2"></i>高级设置</h5>
                            <div class="row g-3 mt-3">
                                <div class="col-md-6">
                                    <label for="version" class="form-label">版本号</label>
                                    <input type="text" class="form-control" id="version" value="V1.0" placeholder="例如：V1.0">
                                </div>
                                <div class="col-md-6">
                                    <label for="status" class="form-label">状态</label>
                                    <select class="form-select" id="status">
                                        <option value="draft">草稿</option>
                                        <option value="published">已发布</option>
                                        <option value="deprecated">已废弃</option>
                                    </select>
                                </div>
                                <div class="col-12">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="isAbstract">
                                        <label class="form-check-label" for="isAbstract">抽象类型（不可实例化）</label>
                                    </div>
                                    <div class="form-check form-switch mt-2">
                                        <input class="form-check-input" type="checkbox" id="allowExtension">
                                        <label class="form-check-label" for="allowExtension">允许扩展子类型</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P1.2 静态属性定义 -->
                    <div class="tab-pane fade" id="static-attributes" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5><i class="fas fa-table me-2"></i>静态属性定义</h5>
                            <button class="btn btn-sm btn-outline-primary" id="addAttributeBtn">
                                <i class="fas fa-plus me-1"></i>添加属性
                            </button>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="table-light">
                                    <tr>
                                        <th style="width: 5%"></th>
                                        <th style="width: 15%">字段名</th>
                                        <th style="width: 15%">显示名称</th>
                                        <th style="width: 10%">数据类型</th>
                                        <th style="width: 10%">单位</th>
                                        <th style="width: 10%">是否必填</th>
                                        <th style="width: 10%">显示优先级</th>
                                        <th style="width: 15%">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="attributesTableBody">
                                    <tr class="attribute-row">
                                        <td><i class="fas fa-grip-vertical draggable-handle"></i></td>
                                        <td><input type="text" class="form-control form-control-sm" value="modelNo" placeholder="字段名"></td>
                                        <td><input type="text" class="form-control form-control-sm" value="型号规格" placeholder="显示名称"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="string" selected>字符串</option>
                                                <option value="number">数字</option>
                                                <option value="date">日期</option>
                                                <option value="boolean">布尔值</option>
                                                <option value="enum">枚举</option>
                                            </select>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" placeholder="单位"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="false">否</option>
                                                <option value="true" selected>是</option>
                                            </select>
                                        </td>
                                        <td><input type="number" class="form-control form-control-sm" value="10" min="1" max="100"></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr class="attribute-row">
                                        <td><i class="fas fa-grip-vertical draggable-handle"></i></td>
                                        <td><input type="text" class="form-control form-control-sm" value="manufacturer" placeholder="字段名"></td>
                                        <td><input type="text" class="form-control form-control-sm" value="生产厂商" placeholder="显示名称"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="string" selected>字符串</option>
                                                <option value="number">数字</option>
                                                <option value="date">日期</option>
                                                <option value="boolean">布尔值</option>
                                                <option value="enum">枚举</option>
                                            </select>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" placeholder="单位"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="false">否</option>
                                                <option value="true">是</option>
                                            </select>
                                        </td>
                                        <td><input type="number" class="form-control form-control-sm" value="20" min="1" max="100"></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr class="attribute-row">
                                        <td><i class="fas fa-grip-vertical draggable-handle"></i></td>
                                        <td><input type="text" class="form-control form-control-sm" value="productionDate" placeholder="字段名"></td>
                                        <td><input type="text" class="form-control form-control-sm" value="生产日期" placeholder="显示名称"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="string">字符串</option>
                                                <option value="number">数字</option>
                                                <option value="date" selected>日期</option>
                                                <option value="boolean">布尔值</option>
                                                <option value="enum">枚举</option>
                                            </select>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" placeholder="单位"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="false" selected>否</option>
                                                <option value="true">是</option>
                                            </select>
                                        </td>
                                        <td><input type="number" class="form-control form-control-sm" value="30" min="1" max="100"></td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="alert alert-info mt-4">
                            <i class="fas fa-lightbulb me-2"></i><strong>提示：</strong>静态属性用于描述资产的固有特征，如型号、厂商、尺寸等不会随时间变化的信息。可通过拖拽调整属性顺序。
                        </div>
                    </div>

                    <!-- P1.3 动态变量模板定义 -->
                    <div class="tab-pane fade" id="dynamic-variables" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5><i class="fas fa-bolt me-2"></i>动态变量模板定义</h5>
                            <div>
                                <button class="btn btn-sm btn-outline-secondary me-2">
                                    <i class="fas fa-upload me-1"></i>导入模板
                                </button>
                                <button class="btn btn-sm btn-outline-primary" id="addVariableBtn">
                                    <i class="fas fa-plus me-1"></i>添加变量
                                </button>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="table-light">
                                    <tr>
                                        <th>变量标识符</th>
                                        <th>显示名称</th>
                                        <th>数据类型</th>
                                        <th>来源类型</th>
                                        <th>采集周期</th>
                                        <th>单位</th>
                                        <th>质量等级</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="variablesTableBody">
                                    <tr>
                                        <td><input type="text" class="form-control form-control-sm" value="temperature" placeholder="变量标识符"></td>
                                        <td><input type="text" class="form-control form-control-sm" value="窑体温度" placeholder="显示名称"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="number" selected>数字</option>
                                                <option value="string">字符串</option>
                                                <option value="boolean">布尔值</option>
                                                <option value="array">数组</option>
                                            </select>
                                        </td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="OT" selected>OT</option>
                                                <option value="IT">IT</option>
                                                <option value="simulation">仿真</option>
                                                <option value="calculated">计算</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="input-group input-group-sm">
                                                <input type="number" class="form-control" value="10" min="1">
                                                <select class="form-select">
                                                    <option value="s">秒</option>
                                                    <option value="min" selected>分钟</option>
                                                    <option value="h">小时</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" value="°C" placeholder="单位"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="raw">原始数据</option>
                                                <option value="filtered" selected>过滤后</option>
                                                <option value="calibrated">校准后</option>
                                                <option value="aggregated">聚合后</option>
                                            </select>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#variableDetailModal"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" class="form-control form-control-sm" value="pressure" placeholder="变量标识符"></td>
                                        <td><input type="text" class="form-control form-control-sm" value="系统压力" placeholder="显示名称"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="number" selected>数字</option>
                                                <option value="string">字符串</option>
                                                <option value="boolean">布尔值</option>
                                                <option value="array">数组</option>
                                            </select>
                                        </td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="OT" selected>OT</option>
                                                <option value="IT">IT</option>
                                                <option value="simulation">仿真</option>
                                                <option value="calculated">计算</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="input-group input-group-sm">
                                                <input type="number" class="form-control" value="5" min="1">
                                                <select class="form-select">
                                                    <option value="s" selected>秒</option>
                                                    <option value="min">分钟</option>
                                                    <option value="h">小时</option>
                                                </select>
                                            </div>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" value="kPa" placeholder="单位"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="raw">原始数据</option>
                                                <option value="filtered" selected>过滤后</option>
                                                <option value="calibrated">校准后</option>
                                                <option value="aggregated">聚合后</option>
                                            </select>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#variableDetailModal"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- P1.4 数据处理规则 -->
                    <div class="tab-pane fade" id="data-processing-rules" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5><i class="fas fa-filter me-2"></i>数据处理规则</h5>
                            <div>
                                <button class="btn btn-sm btn-outline-secondary me-2">
                                    <i class="fas fa-download me-1"></i>导出规则
                                </button>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-plus me-1"></i>添加规则
                                </button>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="table-light">
                                    <tr>
                                        <th>规则名称</th>
                                        <th>适用变量</th>
                                        <th>处理算法</th>
                                        <th>参数配置</th>
                                        <th>启用状态</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="text" class="form-control form-control-sm" value="温度平滑处理"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="temperature" selected>窑体温度</option>
                                                <option value="pressure">系统压力</option>
                                                <option value="all">全部变量</option>
                                            </select>
                                        </td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="moving_average" selected>移动平均</option>
                                                <option value="exponential_smoothing">指数平滑</option>
                                                <option value="kalman_filter">卡尔曼滤波</option>
                                                <option value="custom">自定义算法</option>
                                            </select>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" value="窗口大小:10,权重:0.7"></td>
                                        <td>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" checked>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" class="form-control form-control-sm" value="设备状态判定"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="temperature">窑体温度</option>
                                                <option value="pressure">系统压力</option>
                                                <option value="all" selected>全部变量</option>
                                            </select>
                                        </td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="moving_average">移动平均</option>
                                                <option value="exponential_smoothing">指数平滑</option>
                                                <option value="kalman_filter">卡尔曼滤波</option>
                                                <option value="custom" selected>自定义算法</option>
                                            </select>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" value="阈值:1000,持续时间:30s"></td>
                                        <td>
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" checked>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- P1.5 指标卡片模板 -->
                    <div class="tab-pane fade" id="indicator-card-templates" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5><i class="fas fa-chart-line me-2"></i>指标卡片模板</h5>
                            <div>
                                <button class="btn btn-sm btn-outline-secondary me-2">
                                    <i class="fas fa-copy me-1"></i>复制模板
                                </button>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-plus me-1"></i>新建模板
                                </button>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-4 mb-4">
                                <div class="card h-100 border-primary">
                                    <div class="card-header bg-primary text-white d-flex justify-content-between">
                                        <h6 class="mb-0">温度监控卡片</h6>
                                        <div>
                                            <button class="btn btn-sm btn-light me-1"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-light"><i class="fas fa-trash"></i></button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span class="text-muted">窑体温度</span>
                                            <span class="badge bg-success">实时</span>
                                        </div>
                                        <div class="display-4 fw-bold">1250°C</div>
                                        <div class="text-end text-success"><i class="fas fa-arrow-up me-1"></i>2.3°C</div>
                                        <div class="mt-3">
                                            <canvas height="60" id="tempChart"></canvas>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <small class="text-muted">更新频率: 10秒 | 变量: temperature</small>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 mb-4">
                                <div class="card h-100 border-info">
                                    <div class="card-header bg-info text-white d-flex justify-content-between">
                                        <h6 class="mb-0">运行状态卡片</h6>
                                        <div>
                                            <button class="btn btn-sm btn-light me-1"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-light"><i class="fas fa-trash"></i></button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span class="text-muted">设备运行状态</span>
                                            <span class="badge bg-warning">计算</span>
                                        </div>
                                        <div class="display-4 fw-bold">正常</div>
                                        <div class="progress mt-3" style="height: 8px;">
                                            <div class="progress-bar bg-success" role="progressbar" style="width: 92%"></div>
                                        </div>
                                        <div class="d-flex justify-content-between mt-1">
                                            <small>健康度</small>
                                            <small>92%</small>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <small class="text-muted">更新频率: 30秒 | 基于多变量计算</small>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-4 mb-4">
                                <div class="card h-100 border-warning">
                                    <div class="card-header bg-warning text-dark d-flex justify-content-between">
                                        <h6 class="mb-0">能耗监控卡片</h6>
                                        <div>
                                            <button class="btn btn-sm btn-dark me-1"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-dark"><i class="fas fa-trash"></i></button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between align-items-center mb-3">
                                            <span class="text-muted">单位能耗</span>
                                            <span class="badge bg-primary">统计</span>
                                        </div>
                                        <div class="display-4 fw-bold">12.5 kWh/t</div>
                                        <div class="text-end text-danger"><i class="fas fa-arrow-up me-1"></i>0.8 kWh/t</div>
                                        <div class="mt-3">
                                            <canvas height="60" id="energyChart"></canvas>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <small class="text-muted">更新频率: 5分钟 | 基于产量与能耗计算</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- P1.6 告警规则模板 -->
                    <div class="tab-pane fade" id="alarm-rule-templates" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5><i class="fas fa-bell me-2"></i>告警规则模板</h5>
                            <div>
                                <button class="btn btn-sm btn-outline-secondary me-2">
                                    <i class="fas fa-upload me-1"></i>导入规则
                                </button>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-plus me-1"></i>添加规则
                                </button>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="table-light">
                                    <tr>
                                        <th>规则名称</th>
                                        <th>关联变量</th>
                                        <th>触发条件</th>
                                        <th>严重级别</th>
                                        <th>通知方式</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><input type="text" class="form-control form-control-sm" value="高温告警"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="temperature" selected>窑体温度</option>
                                            </select>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" value="> 1300°C 持续10秒"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="high" class="text-danger" selected>高</option>
                                                <option value="medium" class="text-warning">中</option>
                                                <option value="low" class="text-info">低</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" checked id="email1">
                                                <label class="form-check-label" for="email1">邮件</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" checked id="sms1">
                                                <label class="form-check-label" for="sms1">短信</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="wechat1">
                                                <label class="form-check-label" for="wechat1">微信</label>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="text" class="form-control form-control-sm" value="压力异常波动"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="temperature">窑体温度</option>
                                                <option value="pressure" selected>系统压力</option>
                                            </select>
                                        </td>
                                        <td><input type="text" class="form-control form-control-sm" value="变化率 > 5kPa/s"></td>
                                        <td>
                                            <select class="form-select form-select-sm">
                                                <option value="high" class="text-danger">高</option>
                                                <option value="medium" class="text-warning" selected>中</option>
                                                <option value="low" class="text-info">低</option>
                                            </select>
                                        </td>
                                        <td>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" checked id="email2">
                                                <label class="form-check-label" for="email2">邮件</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" id="sms2">
                                                <label class="form-check-label" for="sms2">短信</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="checkbox" checked id="wechat2">
                                                <label class="form-check-label" for="wechat2">微信</label>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                                            <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- P1.7 几何与配置模型管理 -->
                    <div class="tab-pane fade" id="model-management" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5><i class="fas fa-cube me-2"></i>几何与配置模型管理</h5>
                            <div>
                                <button class="btn btn-sm btn-outline-secondary me-2">
                                    <i class="fas fa-download me-1"></i>导出模型
                                </button>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-upload me-1"></i>上传模型
                                </button>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h6 class="mb-0">3D几何模型</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">模型文件</label>
                                            <input type="text" class="form-control" value="rotary_kiln_v2.3.glb" readonly>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">模型版本</label>
                                            <input type="text" class="form-control" value="2.3">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">模型预览</label>
                                            <div class="bg-light rounded p-3 text-center" style="height: 200px; display: flex; align-items: center; justify-content: center;">
                                                <i class="fas fa-cube fa-5x text-muted"></i>
                                            </div>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" checked id="use3DModel">
                                            <label class="form-check-label" for="use3DModel">启用3D模型显示</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="card mb-4">
                                    <div class="card-header">
                                        <h6 class="mb-0">配置模型</h6>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <label class="form-label">模型类型</label>
                                            <select class="form-select">
                                                <option value="parametric" selected>参数化模型</option>
                                                <option value="scripted">脚本化模型</option>
                                                <option value="machine_learning">机器学习模型</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">模型参数</label>
                                            <div class="table-responsive">
                                                <table class="table table-sm">
                                                    <thead>
                                                        <tr>
                                                            <th>参数名</th>
                                                            <th>值</th>
                                                            <th>单位</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr>
                                                            <td>长度</td>
                                                            <td><input type="number" class="form-control form-control-sm" value="35"></td>
                                                            <td>m</td>
                                                        </tr>
                                                        <tr>
                                                            <td>直径</td>
                                                            <td><input type="number" class="form-control form-control-sm" value="4.8"></td>
                                                            <td>m</td>
                                                        </tr>
                                                        <tr>
                                                            <td>倾斜度</td>
                                                            <td><input type="number" class="form-control form-control-sm" value="3.5"></td>
                                                            <td>%</td>
                                                        </tr>
                                                        <tr>
                                                            <td>转速</td>
                                                            <td><input type="number" class="form-control form-control-sm" value="1.2"></td>
                                                            <td>r/min</td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 变更日志与权限控制 -->
                    <div class="tab-pane fade" id="change-log-permissions" role="tabpanel">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5><i class="fas fa-history me-2"></i>变更日志与权限控制</h5>
                        </div>

                        <ul class="nav nav-tabs mb-3" id="changeLogTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="change-log-tab" data-bs-toggle="tab" data-bs-target="#change-log" type="button" role="tab">变更日志</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="permissions-tab" data-bs-toggle="tab" data-bs-target="#permissions" type="button" role="tab">权限控制</button>
                            </li>
                        </ul>

                        <div class="tab-content" id="changeLogTabsContent">
                            <div class="tab-pane fade show active" id="change-log" role="tabpanel">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>变更时间</th>
                                                <th>变更人</th>
                                                <th>变更类型</th>
                                                <th>变更内容摘要</th>
                                                <th>版本号</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>2023-11-15 14:32:21</td>
                                                <td>张工</td>
                                                <td><span class="badge bg-primary">更新</span></td>
                                                <td>添加高温告警规则，修改温度平滑算法参数</td>
                                                <td>v2.1</td>
                                            </tr>
                                            <tr>
                                                <td>2023-11-10 09:15:47</td>
                                                <td>李工</td>
                                                <td><span class="badge bg-success">创建</span></td>
                                                <td>创建资产类型：回转窑，添加基础属性和动态变量</td>
                                                <td>v1.0</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="permissions" role="tabpanel">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                            <tr>
                                                <th>角色</th>
                                                <th>查看</th>
                                                <th>编辑</th>
                                                <th>删除</th>
                                                <th>发布</th>
                                                <th>管理权限</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>管理员</td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                            </tr>
                                            <tr>
                                                <td>工艺工程师</td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                            </tr>
                                            <tr>
                                                <td>操作员</td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                            </tr>
                                            <tr>
                                                <td>访客</td>
                                                <td><input type="checkbox" class="form-check-input" checked disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                                <td><input type="checkbox" class="form-check-input" disabled></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 变量详情模态框 -->
    <div class="modal fade" id="variableDetailModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">变量详情配置</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="variableId" class="form-label">变量标识符</label>
                            <input type="text" class="form-control" id="variableId" value="temperature">
                        </div>
                        <div class="col-md-6">
                            <label for="variableName" class="form-label">显示名称</label>
                            <input type="text" class="form-control" id="variableName" value="窑体温度">
                        </div>
                        <div class="col-md-4">
                            <label for="dataType" class="form-label">数据类型</label>
                            <select class="form-select" id="dataType">
                                <option value="number" selected>数字</option>
                                <option value="string">字符串</option>
                                <option value="boolean">布尔值</option>
                                <option value="array">数组</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="sourceType" class="form-label">来源类型</label>
                            <select class="form-select" id="sourceType">
                                <option value="OT" selected>OT</option>
                                <option value="IT">IT</option>
                                <option value="simulation">仿真</option>
                                <option value="calculated">计算</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="unit" class="form-label">单位</label>
                            <input type="text" class="form-control" id="unit" value="°C">
                        </div>

                        <div class="col-12 mt-4">
                            <h6><i class="fas fa-sliders-h me-2"></i>数据质量与范围</h6>
                        </div>
                        <div class="col-md-4">
                            <label for="qualityLevel" class="form-label">质量等级</label>
                            <select class="form-select" id="qualityLevel">
                                <option value="raw">原始数据</option>
                                <option value="filtered" selected>过滤后</option>
                                <option value="calibrated">校准后</option>
                                <option value="aggregated">聚合后</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label for="dataPrecision" class="form-label">数据精度</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="dataPrecision" value="1" min="0" max="10">
                                <span class="input-group-text">小数位数</span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <label for="updateRate" class="form-label">更新频率</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="updateRate" value="10" min="1">
                                <span class="input-group-text">秒/次</span>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <label for="minValue" class="form-label">最小值</label>
                            <input type="number" class="form-control" id="minValue" value="0">
                        </div>
                        <div class="col-md-6">
                            <label for="maxValue" class="form-label">最大值</label>
                            <input type="number" class="form-control" id="maxValue" value="1500">
                        </div>

                        <div class="col-12 mt-4">
                            <h6><i class="fas fa-wrench me-2"></i>异常处理</h6>
                        </div>
                        <div class="col-md-6">
                            <label for="invalidValue" class="form-label">无效值替代</label>
                            <input type="number" class="form-control" id="invalidValue" value="-9999">
                        </div>
                        <div class="col-md-6">
                            <label for="outOfRangeAction" class="form-label">超范围处理</label>
                            <select class="form-select" id="outOfRangeAction">
                                <option value="clamp" selected>截断到边界值</option>
                                <option value="replace">替换为无效值</option>
                                <option value="alert">触发告警</option>
                                <option value="ignore">忽略该值</option>
                            </select>
                        </div>

                        <div class="col-12 mt-4">
                            <h6><i class="fas fa-sticky-note me-2"></i>描述信息</h6>
                            <textarea class="form-control" rows="3" placeholder="描述该变量的含义、采集位置和注意事项">窑体中部温度传感器采集的实时温度，反映窑内煅烧情况。</textarea>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">取消</button>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">保存配置</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <script>
        // 添加属性按钮事件
        document.getElementById('addAttributeBtn').addEventListener('click', function() {
            const tableBody = document.getElementById('attributesTableBody');
            const newRow = document.createElement('tr');
            newRow.className = 'attribute-row';
            newRow.innerHTML = `
                <td><i class="fas fa-grip-vertical draggable-handle"></i></td>
                <td><input type="text" class="form-control form-control-sm" placeholder="字段名"></td>
                <td><input type="text" class="form-control form-control-sm" placeholder="显示名称"></td>
                <td>
                    <select class="form-select form-select-sm">
                        <option value="string" selected>字符串</option>
                        <option value="number">数字</option>
                        <option value="date">日期</option>
                        <option value="boolean">布尔值</option>
                        <option value="enum">枚举</option>
                    </select>
                </td>
                <td><input type="text" class="form-control form-control-sm" placeholder="单位"></td>
                <td>
                    <select class="form-select form-select-sm">
                        <option value="false" selected>否</option>
                        <option value="true">是</option>
                    </select>
                </td>
                <td><input type="number" class="form-control form-control-sm" value="50" min="1" max="100"></td>
                <td>
                    <button class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></button>
                    <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                </td>
            `;
            tableBody.appendChild(newRow);
        });

        // 初始化能耗图表
        const ctx = document.getElementById('energyChart');
        if (ctx) {
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1月', '2月', '3月', '4月', '5月', '6月'],
                    datasets: [{
                        label: '单位能耗 (kWh/t)',
                        data: [13.2, 12.8, 13.5, 12.9, 12.7, 12.5],
                        borderColor: '#0d6efd',
                        tension: 0.3,
                        fill: true,
                        backgroundColor: 'rgba(13, 110, 253, 0.1)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        y: { beginAtZero: false, min: 12, max: 14 }
                    }
                }
            });
        }

        // 添加变量按钮事件
        document.getElementById('addVariableBtn').addEventListener('click', function() {
            const tableBody = document.getElementById('variablesTableBody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
                <td><input type="text" class="form-control form-control-sm" placeholder="变量标识符"></td>
                <td><input type="text" class="form-control form-control-sm" placeholder="显示名称"></td>
                <td>
                    <select class="form-select form-select-sm">
                        <option value="number" selected>数字</option>
                        <option value="string">字符串</option>
                        <option value="boolean">布尔值</option>
                        <option value="array">数组</option>
                    </select>
                </td>
                <td>
                    <select class="form-select form-select-sm">
                        <option value="OT" selected>OT</option>
                        <option value="IT">IT</option>
                        <option value="simulation">仿真</option>
                        <option value="calculated">计算</option>
                    </select>
                </td>
                <td>
                    <div class="input-group input-group-sm">
                        <input type="number" class="form-control" value="5" min="1">
                        <select class="form-select">
                            <option value="s" selected>秒</option>
                            <option value="min">分钟</option>
                            <option value="h">小时</option>
                        </select>
                    </div>
                </td>
                <td><input type="text" class="form-control form-control-sm" placeholder="单位"></td>
                <td>
                    <select class="form-select form-select-sm">
                        <option value="raw">原始数据</option>
                        <option value="filtered" selected>过滤后</option>
                        <option value="calibrated">校准后</option>
                        <option value="aggregated">聚合后</option>
                    </select>
                </td>
                <td>
                    <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#variableDetailModal"><i class="fas fa-edit"></i></button>
                    <button class="btn btn-sm btn-outline-danger ms-1"><i class="fas fa-trash"></i></button>
                </td>
            `;
            tableBody.appendChild(newRow);
        });

        // 返回列表按钮事件
        document.getElementById('backToListBtn').addEventListener('click', function() {
            window.location.href = 'asset-type-list.html';
        });

        // 步骤导航功能
        document.querySelectorAll('.step-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const target = this.getAttribute('href');
                const step = this.getAttribute('data-step');

                // 更新步骤激活状态
                document.querySelectorAll('.step-item').forEach(stepEl => {
                    stepEl.classList.remove('active');
                    stepEl.querySelector('.step-number').classList.remove('bg-primary');
                    stepEl.querySelector('.step-number').classList.add('bg-secondary');
                });

                this.classList.add('active');
                this.querySelector('.step-number').classList.remove('bg-secondary');
                this.querySelector('.step-number').classList.add('bg-primary');

                // 更新内容区域
                document.querySelectorAll('.tab-pane').forEach(pane => {
                    pane.classList.remove('show', 'active');
                });
                document.querySelector(target).classList.add('show', 'active');

                // 平滑滚动到内容顶部
                document.querySelector('.card-body').scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
        });

        // 保存草稿按钮事件
        document.getElementById('saveDraftBtn').addEventListener('click', function() {
            this.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>保存中...';
            setTimeout(() => {
                this.innerHTML = '<i class="fas fa-save me-1"></i>保存草稿';
                // 模拟API请求保存草稿
                fetch('/api/asset-types/draft', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        name: document.getElementById('typeName').value,
                        code: document.getElementById('typeCode').value,
                        status: 'draft'
                    })
                }).then(response => {
                    if (response.ok) {
                        alert('资产类型草稿已成功保存');
                    } else {
                        alert('保存草稿失败，请重试');
                    }
                }).catch(error => {
                    console.error('保存请求失败:', error);
                    alert('保存时发生错误，请检查网络连接');
                });
            }, 800);
        });

        // 发布按钮事件
        document.getElementById('publishBtn').addEventListener('click', function() {
            if (!document.getElementById('typeName').value) {
                alert('请先填写类型名称');
                return;
            }
            if (!document.getElementById('typeCode').value) {
                alert('请先填写类型编码');
                return;
            }

            this.innerHTML = '<i class="fas fa-spinner fa-spin me-1"></i>发布中...';
            setTimeout(() => {
                this.innerHTML = '<i class="fas fa-check-circle me-1"></i>发布类型';
                // 模拟API请求提交数据
                fetch('/api/asset-types', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({
                        name: document.getElementById('typeName').value,
                        code: document.getElementById('typeCode').value,
                        status: 'published'
                    })
                }).then(response => {
                    if (response.ok) {
                        alert(`资产类型${document.getElementById('typeName').value}已成功发布`);
                        window.location.href = 'asset-type-list.html';
                    } else {
                        alert('发布失败，请重试');
                    }
                }).catch(error => {
                    console.error('发布请求失败:', error);
                    alert('发布时发生错误，请检查网络连接');
                });